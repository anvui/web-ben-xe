(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66bd0332"],{"0d79":function(s,e,t){"use strict";t("59eb")},"0d84":function(s,e,t){"use strict";t("ff16")},"59eb":function(s,e,t){},"62bd":function(s,e,t){"use strict";t.r(e);var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"form-reset-password-container"},[t("div",{staticClass:"container"},[t("el-form",{ref:"FormResetPassword",staticClass:"reset-password-form",attrs:{model:s.params,rules:s.formRules,"auto-complete":"on","label-position":"left"}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[s._v(s._s(s.$t("resetPassword.title")))])]),t("el-form-item",{attrs:{prop:"username"}},[t("div",{staticClass:"row no-gutters"},[t("div",{staticClass:"col",staticStyle:{"padding-right":"12px"}},[t("el-input",{ref:"username",staticClass:"form-input",attrs:{name:"username",type:"text",tabindex:"1"},model:{value:s.params.username,callback:function(e){s.$set(s.params,"username","string"===typeof e?e.trim():e)},expression:"params.username"}}),t("label",{staticClass:"custom-placeholder"},[s._v(s._s(s.$t("resetPassword.usernameOrPhone")))])],1),t("div",{staticClass:"col-auto"},[t("el-button",{staticClass:"btn-send-otp",attrs:{loading:s.loadingSendOtp},on:{click:s.sendOtp}},[s._v(s._s(s.$t("resetPassword.btnSendOtp")))])],1)])]),t("el-form-item",{attrs:{prop:"otp"}},[t("el-input",{ref:"otp",staticClass:"form-input",attrs:{type:"text",name:"otp",tabindex:"2","auto-complete":"on"},model:{value:s.params.otp,callback:function(e){s.$set(s.params,"otp","string"===typeof e?e.trim():e)},expression:"params.otp"}}),t("label",{staticClass:"custom-placeholder"},[s._v(s._s(s.$t("resetPassword.otp")))])],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{key:s.passwordType,ref:"password",staticClass:"form-input",attrs:{type:s.passwordType,name:"password",tabindex:"3","auto-complete":"off"},model:{value:s.params.password,callback:function(e){s.$set(s.params,"password","string"===typeof e?e.trim():e)},expression:"params.password"}}),t("label",{staticClass:"custom-placeholder"},[s._v(s._s(s.$t("resetPassword.password")))]),t("span",{staticClass:"show-pwd",on:{click:function(e){return s.showPwd("password")}}},[t("svg-icon",{attrs:{"icon-class":"password"===s.passwordType?"eye":"eye-open"}})],1)],1),t("el-form-item",{attrs:{prop:"confirmPassword"}},[t("el-input",{key:s.confirmPasswordType,ref:"confirmPassword",staticClass:"form-input",attrs:{type:s.confirmPasswordType,name:"confirmPassword",tabindex:"4","auto-complete":"off",disabled:!s.params.password},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.handleSavePassword(e)}},model:{value:s.params.confirmPassword,callback:function(e){s.$set(s.params,"confirmPassword","string"===typeof e?e.trim():e)},expression:"params.confirmPassword"}}),t("label",{staticClass:"custom-placeholder"},[s._v(s._s(s.$t("resetPassword.confirmPassword")))]),t("span",{staticClass:"show-pwd",on:{click:function(e){return s.showPwd("confirm")}}},[t("svg-icon",{attrs:{"icon-class":"password"===s.confirmPasswordType?"eye":"eye-open"}})],1)],1),t("div",{staticClass:"row no-gutters align-items-center mt-4 button-wrap"},[t("div",{staticClass:"col-xs-12 col text-right"},[t("el-button",{staticClass:"button btn-save",attrs:{icon:"el-icon-s-promotion",loading:s.loading},nativeOn:{click:function(e){return e.preventDefault(),s.handleSavePassword(e)}}},[s._v(" "+s._s(s.$t("resetPassword.btnSave"))+" ")])],1),t("div",{staticClass:"col-xs-12 col"},[t("el-button",{staticClass:"button btn-back",attrs:{icon:"el-icon-back"},nativeOn:{click:function(e){return e.preventDefault(),s.handleGoBack(e)}}},[s._v(" "+s._s(s.$t("resetPassword.btnBack"))+" ")])],1)])],1)],1)])},a=[],o=t("5530"),n=t("2f62"),i={name:"ResetPassword",data:function(){var s=this,e=function(e,t,r){t?r():r(new Error(s.$t("message.resetPassword.requireUsername")))},t=function(e,t,r){t?r():r(new Error(s.$t("message.resetPassword.requireOtp")))},r=function(e,t,r){t?t.length<6||t.length>20?r(new Error(s.$t("message.resetPassword.limitPassword"))):r():r(new Error(s.$t("message.resetPassword.requirePassword")))},a=function(e,t,r){t?t!==s.params.password?r(new Error(s.$t("message.resetPassword.passwordNotMatch"))):r():r(new Error(s.$t("message.resetPassword.requireConfirmPassword")))};return{params:{username:"",otp:"",password:"",confirmPassword:""},formRules:{username:[{required:!0,trigger:["blur","change"],validator:e}],password:[{required:!0,trigger:["blur","change"],validator:r}],otp:[{required:!0,trigger:["blur","change"],validator:t}],confirmPassword:[{required:!0,trigger:["blur","change"],validator:a}]},loading:!1,loadingSendOtp:!1,passwordType:"password",confirmPasswordType:"password"}},computed:Object(o["a"])({},Object(n["c"])(["token"])),methods:{showPwd:function(s){var e=this;switch(s){case"password":"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}));break;case"confirm":"password"===this.confirmPasswordType?this.confirmPasswordType="":this.confirmPasswordType="password",this.$nextTick((function(){e.$refs.confirmPassword.focus()}));break}},sendOtp:function(){var s=this;this.params.username?(this.loadingSendOtp=!0,this.$store.dispatch("user/sendOtp",{username:this.params.username}).then((function(e){s.loadingSendOtp=!1,s.$message.success(e)})).catch((function(e){s.loadingSendOtp=!1,console.log(e),s.$message.error(e.message?e.message:s.$t("message.common.undefinedError"))}))):this.$message.error(this.$t("message.resetPassword.requireUsername"))},handleGoBack:function(){this.$router.go(-1)},handleSavePassword:function(){var s=this;this.$refs.FormResetPassword.validate((function(e){if(!e)return console.log("error submit!!"),!1;s.loading=!0,s.$store.dispatch("user/resetPassword",s.params).then((function(e){s.loading=!1,s.$message.success(s.$t("message.resetPassword.updateSuccessful"))})).catch((function(e){s.loading=!1,console.log(e.message),s.$message.error(e.message?e.message:s.$t("message.common.undefinedError"))}))}))}}},c=i,d=(t("0d79"),t("0d84"),t("2877")),l=Object(d["a"])(c,r,a,!1,null,"1764c3e9",null);e["default"]=l.exports},ff16:function(s,e,t){}}]);