(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d421b604"],{"02e1":function(t,e,i){},"04fc":function(t,e,i){},"08f3":function(t,e,i){"use strict";i.d(e,"d",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r}));var s={CANCELED:0,NEW:1,BOOKED:2,BOUGHT:3,ON_THE_TRIP:4,COMPLETED:5},a={TRIP:1,ROUTE:2,VEHICLE:3,COMPANY:4,KBUS:5},n={BLOG:1,COMMUNITY:2},r={APP_IOS_FOR_CUSTOMER:1,APP_ANDROID_FOR_CUSTOMER:2,APP_IOS_FOR_DRIVER:3,APP_ANDROID_FOR_DRIVER:4}},"0bd7":function(t,e,i){},"10d7":function(t,e,i){},1343:function(t,e,i){"use strict";i("4376")},"189d":function(t,e,i){},"208d":function(t,e,i){},4376:function(t,e,i){},"4f4d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("step-box-ticket"),i("div",{staticClass:"container"},[i("div",{staticClass:"filter-trip-on-small-screen text-right mt-3"},[i("el-button",{staticClass:"btn-filter",on:{click:function(e){t.drawer.status=!0}}},[t._v(" Lọc "),i("svg",{staticClass:"bi bi-funnel-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2z"}})])]),i("el-drawer",{attrs:{size:"50%",visible:t.drawer.status,direction:t.drawer.direction},on:{"update:visible":function(e){return t.$set(t.drawer,"status",e)}}},[i("filter-trip")],1)],1),i("div",{staticClass:"row no-margin list-trip-wrapper"},[i("filter-trip"),i("list-trip")],1)])],1)},a=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filter"},[i("div",{staticClass:"arrange-trip"},[i("label",{staticClass:"title no-margin pb-3"},[t._v(t._s(t.$t("book.filter.arrange.label")))]),i("div",{staticClass:"arrange-by"},[t._l(t.listArrange,(function(e,s){return[i("a",{key:s,class:{active:t.currentArrange&&t.currentArrange===e.id},attrs:{id:e.id},on:{click:function(i){return i.preventDefault(),i.stopPropagation(),t.arrangeTrip(e.id)}}},[t._v(t._s(e.name))])]}))],2)]),i("div",{staticClass:"list-banner-ads"},[i("hooper",{attrs:{settings:t.hooperSettings}},[i("slide",[i("div",{staticClass:"row no-gutters justify-content-center"},[i("div",{staticClass:"col-auto"},[i("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewNews("kbus-khai-truong-hanh-trinh-du-lich-tu-ha-noi-di-sapa-voi-chi-phi-10k")}}},[i("img",{attrs:{src:"https://apikbus.anvui.vn/image/get/fa420954-27e7-483a-aff9-27383fe72b30",alt:"banner 1"}})])])])]),i("slide",[i("div",{staticClass:"row no-gutters justify-content-center"},[i("div",{staticClass:"col-auto"},[i("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewNews("kbus-nen-tang-chia-se-dich-vu-van-tai-du-lich-duong-dai-kbus-cuu-canh-cho-doanh-nghiep-van-tai-du-lich")}}},[i("img",{attrs:{src:"https://apikbus.anvui.vn/image/get/ca627588-ca60-4cad-821a-981bf3237362",alt:"banner 2"}})])])])]),i("slide",[i("div",{staticClass:"row no-gutters justify-content-center"},[i("div",{staticClass:"col-auto"},[i("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewNews("di-xe-ha-noi-–-sapa-lao-cai-dung-quen-trai-nghiem-kbus")}}},[i("img",{attrs:{src:"https://apikbus.anvui.vn/image/get/363948f6-cab4-47ce-aa07-f00573477f2e",alt:"banner 3"}})])])])]),i("hooper-navigation",{attrs:{slot:"hooper-addons"},slot:"hooper-addons"}),i("hooper-pagination",{attrs:{slot:"hooper-addons"},slot:"hooper-addons"})],1)],1)])},r=[],o=i("5530"),c=(i("4e82"),i("99af"),i("7e04")),l=(i("955f"),i("2f62")),p={components:{Hooper:c["a"],Slide:c["d"],HooperNavigation:c["b"],HooperPagination:c["c"]},data:function(){return{listArrange:[{id:"start-time",name:this.$t("book.filter.arrange.startTime")},{id:"cheap-price",name:this.$t("book.filter.arrange.price")}],filters:{startTime:null},currentArrange:null,hooperSettings:{itemsToShow:1,infiniteScroll:!0,trimWhiteSpace:!0,autoPlay:!0,playSpeed:6e3,wheelControl:!1}}},computed:Object(o["a"])({},Object(l["b"])(["trips"])),watch:{currentArrange:function(t){switch(t){case"rate-company":console.log(1);break;case"start-time":this.trips.sort((function(t,e){return parseInt(t.runTimeMilliseconds)-parseInt(e.runTimeMilliseconds)}));break;case"cheap-price":this.trips.sort((function(t,e){return parseInt(t.baseTicketPrice)-parseInt(e.baseTicketPrice)}));break;default:break}},"filters.startTime":function(t){switch(t){case 1:break;case 2:break;case 3:console.log(3);break;default:break}}},methods:{arrangeTrip:function(t){this.currentArrange=t},viewNews:function(t){window.open("".concat(window.location.origin,"/news/article/").concat(t),"_blank")}}},u=p,d=(i("aaa9"),i("2877")),m=Object(d["a"])(u,n,r,!1,null,"44392adc",null),f=m.exports,h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-trip",attrs:{"element-loading-spinner":"el-icon-kbus-loading"}},[t.trips&&t.trips.length>0?i("div",{staticClass:"count-total"},[i("div",{staticClass:"row no-margin"},[i("div",{staticClass:"col-auto"},[i("span",{staticClass:"total-trip"},[t._v(t._s(t.$t("book.trips.totalTrips",{tripsLength:t.trips.length})))])]),(t.getDateAndPoint&&t.getDateAndPoint.startDate)!=t.$moment().format("YYYY-MM-DD")&&t.trips.length>0?i("div",{staticClass:"col text-right"},[i("el-button",{staticClass:"btn-create-own-trip",on:{click:t.handleCreateTrip}},[t._v(t._s(t.$t("book.trips.btnCreateTrip")))])],1):t._e()])]):t._e(),t.trips&&t.trips.length<=0?i("div",[i("div",{staticClass:"w-100 trips-not-available"},[i("span",{staticClass:"w-100 text-center font-weight-bold"},[t._v(" "+t._s(t.$t("book.trips.tripsNotAvailable",{startDate:t.$moment(t.getDateAndPoint.startDate).format("DD-MM-YYYY")}))+" ")]),t._l(t.$t("book.trips.tripsNotAvailableMessage"),(function(e,s){return[i("span",{key:s},[t._v(t._s(e))])]})),i("div",{staticClass:"w-100 text-center"},[t.token?t._e():i("el-button",{staticClass:"btn-create-own-trip",on:{click:t.handleCreateTrip}},[t._v(t._s(t.$t("book.trips.btnCreateTrip")))])],1)],2),i("div",[i("form-create-trip")],1)]):t._e(),!t.loading&&t.trips&&t.trips.length>0?i("div",{staticClass:"list"},[t._l(t.trips,(function(e,s){return[i("trip",{key:s,attrs:{trip:e,"status-more-info-section":t.moreInfoStatus,"status-selected-trip-section":t.selectedTripStatus},on:{"set-status-more-info-section":t.setStatusMoreInfoSection,"set-status-selected-trip-section":t.setStatusSelectedTripSection}})]}))],2):t._e()])},v=[],g=i("1da1"),b=i("53ca"),k=(i("96cf"),i("7db0"),i("d3b7"),i("d81d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.trip?i("div",{staticClass:"trip-item"},[i("div",{staticClass:"trip-item-info"},[i("div",{staticClass:"col-md-6 info-route"},[i("label",{staticClass:"title"},[t._v(t._s(t.$t("book.trip.timeLabel")))]),i("div",{staticClass:"run-time"},[i("div",{staticStyle:{"max-width":"120px"}},[i("div",{staticClass:"time"},[t._v(t._s(t.formatStartTime))]),i("div",{staticClass:"date"},[t._v(t._s(t.formatStartDate))]),t.trip.route&&t.trip.route.points?i("div",{staticClass:"address-point"},[t._v(t._s(t.trip.route.points[0].name))]):!t.trip.route&&t.getPointManual?i("div",{staticClass:"address-point"},[t._v(t._s(t.getPointManual[0].name))]):t._e()]),i("div",{staticClass:"distance"},[i("svg",{attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.15691 0.70942C3.31741 0.934126 3.26536 1.2464 3.04066 1.40691L1.29066 2.65691C1.06595 2.81741 0.753677 2.76536 0.593172 2.54066C0.432668 2.31595 0.484713 2.00368 0.70942 1.84317L2.45942 0.593172C2.68413 0.432668 2.9964 0.484713 3.15691 0.70942ZM8.84317 0.70942C9.00368 0.484713 9.31595 0.432668 9.54066 0.593172L11.2907 1.84317C11.5154 2.00368 11.5674 2.31595 11.4069 2.54066C11.2464 2.76536 10.9341 2.81741 10.7094 2.65691L8.95942 1.40691C8.73471 1.2464 8.68267 0.934126 8.84317 0.70942ZM0.916696 6.50005C0.916696 3.69258 3.19257 1.41671 6.00004 1.41671C8.80748 1.41671 11.0834 3.69258 11.0834 6.50005C11.0834 9.30749 8.80748 11.5834 6.00004 11.5834C3.19257 11.5834 0.916696 9.30749 0.916696 6.50005ZM6.00004 2.41671C3.74486 2.41671 1.9167 4.24487 1.9167 6.50005C1.9167 8.75521 3.74486 10.5834 6.00004 10.5834C8.2552 10.5834 10.0834 8.75521 10.0834 6.50005C10.0834 4.24487 8.2552 2.41671 6.00004 2.41671ZM5.93994 3.33843C6.21609 3.33846 6.43992 3.56234 6.43989 3.83848L6.43961 6.38354L8.23622 8.18015C8.43148 8.37541 8.43148 8.69199 8.23622 8.88725C8.04096 9.08252 7.72437 9.08252 7.52911 8.88725L5.58604 6.94418C5.49225 6.8504 5.43957 6.7232 5.43959 6.59057L5.43989 3.83837C5.43992 3.56223 5.6638 3.3384 5.93994 3.33843Z",fill:"white"}})]),t._v(" "+t._s(t.$t("book.trip.distanceTime",{hours:t.formatDistanceTime.hours,minutes:t.formatDistanceTime.minutes}))+" ")]),i("div",{staticStyle:{"max-width":"120px"}},[i("div",{staticClass:"time"},[t._v(t._s(t.formatEndTime))]),i("div",{staticClass:"date"},[t._v(t._s(t.formatEndDate))]),t.trip.route&&t.trip.route.points?i("div",{staticClass:"address-point"},[t._v(t._s(t.trip.route.points[t.trip.route.points.length-1].name))]):!t.trip.route&&t.getPointManual?i("div",{staticClass:"address-point"},[t._v(t._s(t.getPointManual[t.getPointManual.length-1].name))]):t._e()])]),i("div",{staticClass:"mt-1"},[t.trip.note?i("span",{staticClass:"trip-note"},[t._v("* "+t._s(t.trip.note))]):t._e()]),i("div",{staticClass:"btn-more-info mt-2"},[i("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.openMoreInfoSection(e)}}},[t._v(t._s(t.$t("book.trip.btnTripInfo")))])])]),i("div",{staticClass:"col info-company"},[t.trip.customerResponses&&t.trip.customerResponses.length>0?i("div",{staticClass:"user-created mt-3"},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("book.trip.userCreated")))]),i("el-avatar",{staticClass:"avatar",attrs:{size:24,fit:"contain",icon:"el-icon-user-solid",src:t.trip.customerResponses[0].avatar}}),i("span",[t._v(t._s(t.trip.customerResponses[0].fullName))])],1):t._e()]),i("div",{staticClass:"col-auto info-price ml-auto"},[i("div",{staticClass:"border-wrap"},[i("div",{staticClass:"text-right"},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("book.trip.priceLabel")))]),i("span",{staticClass:"price-ticket"},[t._v(t._s(t.numeral(t.trip.baseTicketPrice).format("0,0"))+"đ")])]),i("div",{staticClass:"text-right mt-1"},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("book.trip.discountLabel")))]),i("span",{staticClass:"price-ticket"},[t._v(t._s(t.numeral(Math.abs(t.trip.currentTicketPrice-t.trip.baseTicketPrice)).format("0,0"))+"đ")])]),i("span",{staticClass:"empty-seat"},[t._v(t._s(t.$t("book.trip.emptySeat"))+" "+t._s(t.trip.vehicle.totalSeat-t.trip.numberTicketPaid))]),t.allowBookTicket&&t.trip.vehicle.totalSeat-t.trip.numberTicketPaid>0?i("el-button",{staticClass:"btn-select-trip d-block",on:{click:function(e){return e.stopPropagation(),t.openSelectedTripSection(e)}}},[t._v(" "+t._s(t.selectedTripStatus===t.trip.id?t.$t("book.trip.btnClose"):t.$t("book.trip.btnBook"))+" ")]):t._e(),t.allowBookTicket?t._e():i("el-button",{staticClass:"btn-select-trip d-block ml-auto",class:{disabled:!t.allowBookTicket}},[t._v(" "+t._s(t.$t("book.trip.btnTimeout"))+" ")]),t.allowBookTicket&&t.trip.vehicle.totalSeat-t.trip.numberTicketPaid<=0?i("el-button",{staticClass:"btn-select-trip d-block ml-auto",class:{disabled:t.trip.vehicle.totalSeat-t.trip.numberTicketPaid<=0}},[t._v(" "+t._s(t.$t("book.trip.btnFullSeat"))+" ")]):t._e(),i("div",{staticClass:"text-right mt-1",staticStyle:{"margin-right":"20px"}},[i("a",{staticClass:"share-trip",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.preventDefault(),t.shareTrip()}}},[t._v(t._s(t.$t("book.trip.btnShareTrip")))]),i("form-share-link",{attrs:{trip:t.trip},model:{value:t.dialogShareTrip,callback:function(e){t.dialogShareTrip=e},expression:"dialogShareTrip"}})],1)],1)])]),i("div",{staticClass:"more-info-section",class:[t.moreInfoStatus===t.trip.id?"":"collapsed"]},[i("more-info-trip",{attrs:{trip:t.trip}})],1),i("div",{staticClass:"selected-trip-section",class:[t.selectedTripStatus===t.trip.id?"":"collapsed"]},[i("selected-trip",{attrs:{trip:t.trip}})],1)]):t._e()}),C=[],A=(i("a9e3"),i("ed08")),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"more-info-wrapper"},[i("ul",{staticClass:"nav"},[t._l(t.navItem,(function(e,s){return[i("li",{key:s,staticClass:"nav-item"},[i("a",{staticClass:"nav-link",class:{active:t.navActiveStatus===s+1},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.setActive(s)}}},[t._v(t._s(e))])])]}))],2),1===t.navActiveStatus?i("div",{attrs:{id:"list-image"}},[t.trip.vehicle.images?i("div",[i("hooper",{attrs:{settings:t.hooperSettings}},[t._l(t.trip.vehicle.images,(function(e,s){return[i("slide",{key:s},[i("div",{staticClass:"row no-gutters justify-content-center"},[i("div",{staticClass:"col-auto"},[i("a",{attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.handleShowImage(e)}}},[i("img",{attrs:{src:e,alt:"image/png"}})])])])])]})),i("hooper-navigation",{attrs:{slot:"hooper-addons"},slot:"hooper-addons"}),i("hooper-pagination",{attrs:{slot:"hooper-addons"},slot:"hooper-addons"})],2),i("span",{staticClass:"img-description"},[t._v(t._s(t.$t("book.moreInfoTrip.imagesDescription")))])],1):i("div",{staticClass:"w-100 text-center"},[t._v(t._s(t.$t("book.moreInfoTrip.noData")))])]):t._e(),2===t.navActiveStatus?i("div",{attrs:{id:"list-policy"}},[i("ul",[t._l(t.$t("book.moreInfoTrip.policyContent"),(function(e,s){return[i("li",{key:s},[t._v(t._s(e))])]}))],2)]):t._e(),3===t.navActiveStatus?i("div",{attrs:{id:"list-services"}},[t.trip.vehicle.services.length>0?i("div",{staticClass:"row no-gutters p-2",staticStyle:{gap:"16px"}},[t._l(t.trip.vehicle.services,(function(e,s){return[i("div",{key:s,staticClass:"col-auto text-center",staticStyle:{height:"24px"}},[i("div",{staticClass:"d-flex",staticStyle:{gap:"8px"}},[i("img",{attrs:{src:e.icon,alt:"image/png"}}),i("label",[t._v(t._s(e.name))])])])]}))],2):i("div",{staticClass:"w-100 text-center"},[t._v(t._s(t.$t("book.moreInfoTrip.noData")))])]):t._e(),4===t.navActiveStatus?i("div",{attrs:{id:"list-comments"}},[t.listComments.length>0?i("div",{directives:[{name:"loading",rawName:"v-loading"}]},[t._l(t.listComments,(function(e,s){return[i("div",{key:s,staticClass:"comment-item"},[i("div",{staticClass:"col-auto"},[i("el-avatar",{style:{background:e.createdBy.avatar?"transparent":"#C0C4CC"},attrs:{icon:"el-icon-user-solid",fit:"contain",src:e.createdBy.avatar,size:24}})],1),i("div",{staticClass:"col"},[i("div",{staticClass:"user-created"},[t._v(t._s(e.createdBy.fullName))]),i("el-rate",{staticClass:"mt-2",attrs:{value:e.rating,disabled:""}}),i("div",{staticClass:"content"},[t._v(t._s(e.content))]),i("div",{staticClass:"time-created"},[t._v(t._s(t.$moment(e.createdAt).format("DD/MM/YYYY HH:mm")))])],1)])]}))],2):i("div",{staticClass:"w-100 text-center"},[t._v(t._s(t.$t("book.moreInfoTrip.noData")))])]):t._e(),i("el-dialog",{attrs:{visible:t.dialog.status},on:{"update:visible":function(e){return t.$set(t.dialog,"status",e)}}},[i("img",{attrs:{src:t.dialog.imageUrl,alt:"image/png",width:"100%"}})])],1)},I=[],T=i("08f3"),P={components:{Hooper:c["a"],Slide:c["d"],HooperNavigation:c["b"],HooperPagination:c["c"]},props:{trip:{type:Object,default:null}},data:function(){return{navItem:["Hình ảnh","Chính sách","Dịch vụ","Đánh giá"],navActiveStatus:1,hooperSettings:{infiniteScroll:!1,trimWhiteSpace:!0,wheelControl:!1,breakpoints:{1200:{itemsToShow:3},768:{itemsToShow:2},0:{itemsToShow:1}}},loadingRate:!1,dialog:{status:!1,imageUrl:""}}},computed:Object(o["a"])({},Object(l["b"])(["listComments"])),watch:{navActiveStatus:function(t){4===t&&this.getAllRate()}},methods:{setActive:function(t){this.navActiveStatus=t+1},getAllRate:function(){var t=this;this.loadingRate=!0,this.$store.dispatch("comment/getListComments",{type:T["b"].ROUTE,typeId:this.trip.route?this.trip.route.id:-1}).then((function(e){t.loadingRate=!1})).catch((function(e){t.loadingRate=!1,console.log(e),t.$message.error(e.message?e.message:t.$t("message.common.undefinedError"))}))},handleShowImage:function(t){this.dialog.status=!0,this.dialog.imageUrl=t}}},w=P,D=(i("ffb0"),i("9d3f"),Object(d["a"])(w,_,I,!1,null,"5046204f",null)),x=D.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"select-trip-wrapper"},[i("div",{staticClass:"select-point-up-point-down mt-3"},[i("h4",{staticClass:"text-title"},[t._v(t._s(t.$t("book.selectedTrip.title")))]),i("div",{staticClass:"list-point mt-3"},[i("div",{staticClass:"row no-gutters"},[i("div",{staticClass:"col-md-6"},[i("div",{attrs:{id:"point-up"}},[i("div",{staticClass:"w-100 text-center"},[i("label",{staticClass:"pb-1",class:{"label-active":"point-up"===t.pointActive},on:{click:function(e){return t.getActivePoint("point-up")}}},[t._v(t._s(t.$t("book.selectedTrip.pointUp")))])]),i("div",{staticClass:"select-place-address-wrapper",class:{disabled:"point-up"!==t.pointActive}},[i("div",{staticClass:"select-address"},[t.trip.route&&t.trip.route.points?i("el-radio-group",{model:{value:t.pickUpAddress,callback:function(e){t.pickUpAddress=e},expression:"pickUpAddress"}},[i("div",{staticClass:"address"},[t._l(t.getListPointUp,(function(e,s){return[i("el-radio",{key:s,attrs:{label:e.id}},[i("div",{staticClass:"w-100"},[i("span",{attrs:{id:"text-time-and-point"}},[t._v(" "+t._s(e.name)+" ")]),i("span",{attrs:{id:"text-detail-address"}},[t._v(" "+t._s(e.address)+" ")])])])]}))],2)]):t.getPointUpManual?i("el-radio-group",{model:{value:t.pickUpAddressManual,callback:function(e){t.pickUpAddressManual=e},expression:"pickUpAddressManual"}},[i("div",{staticClass:"address"},[t._l(t.getPointUpManual,(function(e,s){return[i("el-radio",{key:s,attrs:{label:e.placeId}},[i("div",{staticClass:"w-100"},[i("span",{attrs:{id:"text-time-and-point"}},[t._v(" "+t._s(e.name)+" ")]),i("span",{attrs:{id:"text-detail-address"}},[t._v(" "+t._s(e.address)+" ")])])])]}))],2)]):i("div",{staticClass:"no-data"},[i("span",[t._v(t._s(t.$t("book.selectedTrip.noData")))])])],1)])])]),i("div",{staticClass:"col-md-6"},[i("div",{attrs:{id:"point-down"}},[i("div",{staticClass:"w-100 text-center"},[i("label",{staticClass:"pb-1",class:{"label-active":"point-down"===t.pointActive},on:{click:function(e){return t.getActivePoint("point-down")}}},[t._v(t._s(t.$t("book.selectedTrip.pointDown")))])]),i("div",{staticClass:"select-place-address-wrapper",class:{disabled:"point-down"!==t.pointActive}},[i("div",{staticClass:"select-address"},[t.trip.route&&t.trip.route.points?i("el-radio-group",{model:{value:t.pickDownAddress,callback:function(e){t.pickDownAddress=e},expression:"pickDownAddress"}},[i("div",{staticClass:"w-100 address"},[t._l(t.getListPointDown,(function(e,s){return[i("el-radio",{key:s,attrs:{label:e.id}},[i("div",{staticClass:"w-100"},[i("span",{attrs:{id:"text-time-and-point"}},[t._v(" "+t._s(e.name)+" ")]),i("span",{attrs:{id:"text-detail-address"}},[t._v(" "+t._s(e.address)+" ")])])])]}))],2)]):t.getPointDownManual?i("el-radio-group",{model:{value:t.pickDownAddressManual,callback:function(e){t.pickDownAddressManual=e},expression:"pickDownAddressManual"}},[i("div",{staticClass:"w-100 address"},[t._l(t.getPointDownManual,(function(e,s){return[i("el-radio",{key:s,attrs:{label:e.placeId}},[i("div",{staticClass:"w-100"},[i("span",{attrs:{id:"text-time-and-point"}},[t._v(" "+t._s(e.name)+" ")]),i("span",{attrs:{id:"text-detail-address"}},[t._v(" "+t._s(e.address)+" ")])])])]}))],2)]):i("div",{staticClass:"no-data"},[i("span",[t._v(t._s(t.$t("book.selectedTrip.noData")))])])],1)])])])])])]),i("div",{staticClass:"select-number-passengers"},[i("div",{staticClass:"col-md-5"},[i("div",{staticClass:"w-100 mt-3"},[i("h4",{staticClass:"text-title"},[t._v(t._s(t.$t("book.selectedTrip.numberPassengers")))])]),i("div",{staticClass:"number-passengers-wrapper"},[i("div",{attrs:{id:"male"}},[i("label",[t._v(t._s(t.$t("book.selectedTrip.selectNumberPassengers")))]),i("el-input-number",{attrs:{value:t.totalPassengers,step:1,min:0,max:t.trip.vehicle.totalSeat-t.trip.numberTicketPaid},on:{change:t.handlePassengersChange}})],1)])]),i("div",{staticClass:"col-md-7"},[i("div",{staticClass:"customer-info-wrapper",style:{padding:t.totalPassengers>0?"0.5rem 1rem 0 1rem":""}},[i("div",{style:{"border-bottom":t.totalPassengers>0?"1px solid #ECEDF1":""},attrs:{id:"list-label"}},[i("div",{staticClass:"nav"},[t._l(t.listIndexTotalPassengers,(function(e){return[i("div",{key:e,staticClass:"nav-item"},[i("label",{staticClass:"pb-1",class:{"label-active":t.labelFormCustomerActive===e},on:{click:function(i){return t.handelFormCustomerActive(e)}}},[t._v("HK"+t._s(e))]),1!==e?i("i",{staticClass:"el-icon-circle-close pl-1 pt-1",on:{click:function(i){return t.removeFormCustomer(e)}}}):t._e()])]}))],2)]),i("div",{attrs:{id:"form-customer-info"}},[t._l(t.listIndexTotalPassengers,(function(e){return[i("form-customer-info",{key:e,ref:"FormCustomerInfo",refInFor:!0,attrs:{"label-form-customer-active":t.labelFormCustomerActive,"trip-id":t.trip.id},model:{value:t.customerInfos,callback:function(e){t.customerInfos=e},expression:"customerInfos"}})]}))],2)])])]),i("div",{staticClass:"agree-terms-check"},[i("el-checkbox",{model:{value:t.agreeTermsStatus,callback:function(e){t.agreeTermsStatus=e},expression:"agreeTermsStatus"}},[t._v(" "+t._s(t.$t("book.selectedTrip.agreeTerms.label"))+" "),i("a",{attrs:{href:"#"}},[t._v(t._s(t.$t("book.selectedTrip.agreeTerms.policy")))])])],1),i("div",{staticClass:"total-seat-and-price"},[i("div",{staticClass:"total-wrapper"},[i("label",[t._v(t._s(t.$t("book.selectedTrip.seatAndPrice.totalPassengers")))]),i("label",[t._v(t._s(t.totalPassengers))])]),i("div",{staticClass:"total-wrapper"},[i("label",[t._v(t._s(t.$t("book.selectedTrip.seatAndPrice.price")))]),i("label",[t._v(t._s(t.numeral(parseInt(t.promotionDiscount>0?t.totalPrice-t.promotionDiscount:t.totalPrice)).format("0,0"))+"đ")])]),i("div",{staticClass:"total-wrapper",staticStyle:{color:"#ED196B"}},[i("label",[t._v(t._s(t.$t("book.selectedTrip.seatAndPrice.discount")))]),i("label",[t._v(t._s(t.numeral(parseInt(t.discountPriceNow)).format("0,0"))+"đ")])]),i("div",{staticClass:"total-wrapper",staticStyle:{color:"#ED196B"}},[i("label",[t._v(t._s(t.$t("book.selectedTrip.seatAndPrice.promotion")))]),i("label",[t._v(t._s(t.promotionDiscount>0?"- "+t.numeral(parseInt(t.promotionDiscount)).format(0,0):0)+"đ")])]),i("div",{staticClass:"total-wrapper",staticStyle:{color:"#ED196B"}},[i("label",[t._v(t._s(t.$t("book.selectedTrip.seatAndPrice.remain")))]),i("label",[t._v(t._s(t.numeral(parseInt(t.promotionDiscount>0?t.remainPrice-t.promotionDiscount:t.remainPrice)).format("0,0"))+"đ")])]),i("div",{staticClass:"description"},[t._l(t.$t("book.selectedTrip.seatAndPrice.description"),(function(e,s){return[i("span",{key:s},[t._v(t._s(e))])]}))],2)]),i("div",{staticClass:"form-invoice"},["OrderPage"===t.$route.name||"CreateTrip"===t.$route.name?i("el-checkbox",{model:{value:t.exportInvoice,callback:function(e){t.exportInvoice=e},expression:"exportInvoice"}},[t._v(" "+t._s(t.$t("book.selectedTrip.invoiceInfo.checkbox"))+" ")]):t._e(),t.exportInvoice?i("el-form",{ref:"invoice-info",attrs:{id:"form-invoice-info",model:t.invoiceInfo,rules:t.formInvoiceRules,"auto-complete":"on","label-position":"left"}},[i("el-form-item",{attrs:{prop:"companyName"}},[i("el-input",{ref:"companyName",staticClass:"form-input",attrs:{name:"companyName",type:"text"},model:{value:t.invoiceInfo.companyName,callback:function(e){t.$set(t.invoiceInfo,"companyName",e)},expression:"invoiceInfo.companyName"}}),i("label",{staticClass:"custom-placeholder"},[t._v(t._s(t.$t("book.selectedTrip.invoiceInfo.companyName")))])],1),i("el-form-item",{attrs:{prop:"address"}},[i("el-input",{ref:"address",staticClass:"form-input",attrs:{name:"address",type:"text"},model:{value:t.invoiceInfo.address,callback:function(e){t.$set(t.invoiceInfo,"address",e)},expression:"invoiceInfo.address"}}),i("label",{staticClass:"custom-placeholder"},[t._v(t._s(t.$t("book.selectedTrip.invoiceInfo.address")))])],1),i("el-form-item",{attrs:{prop:"tax"}},[i("el-input",{ref:"tax",staticClass:"form-input",attrs:{name:"tax",type:"text"},model:{value:t.invoiceInfo.tax,callback:function(e){t.$set(t.invoiceInfo,"tax","string"===typeof e?e.trim():e)},expression:"invoiceInfo.tax"}}),i("label",{staticClass:"custom-placeholder"},[t._v(t._s(t.$t("book.selectedTrip.invoiceInfo.taxNumber")))])],1),i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{ref:"email",staticClass:"form-input",attrs:{name:"email",type:"email"},model:{value:t.invoiceInfo.email,callback:function(e){t.$set(t.invoiceInfo,"email","string"===typeof e?e.trim():e)},expression:"invoiceInfo.email"}}),i("label",{staticClass:"custom-placeholder"},[t._v(t._s(t.$t("book.selectedTrip.invoiceInfo.email")))])],1)],1):t._e()],1),i("div",{staticClass:"book-ticket-section"},[i("el-button",{staticClass:"btn-book-ticket",attrs:{loading:t.loadingBookTicket,disabled:!t.agreeTermsStatus},on:{click:t.handleBookTicket}},[t._v(t._s(t.$t("book.selectedTrip.btnBookTicket")))])],1)])},$=[],y=(i("4de4"),i("4d63"),i("ac1f"),i("2c3e"),i("25f0"),i("00b4"),i("159b"),i("a434"),i("1bba")),M={components:{FormCustomerInfo:y["a"]},props:{trip:{type:Object,default:null}},data:function(){return{pointActive:"point-up",pickUpAddress:-1,pickDownAddress:-1,pickUpAddressManual:"",pickDownAddressManual:"",agreeTermsStatus:!0,totalPassengers:1,labelFormCustomerActive:1,loadingBookTicket:!1,customerInfos:[],listIndexTotalPassengers:[1],referralUser:"",exportInvoice:!1,invoiceInfo:{companyName:"",address:"",email:"",tax:""},formInvoiceRules:{}}},computed:Object(o["a"])(Object(o["a"])({},Object(l["b"])(["promotionResponse","userInfo","validate","fillAllCustomer","firstCustomerInfo"])),{},{getListPointUp:function(){var t=this,e=null;return this.trip.route&&(e=this.trip.route.points.filter((function(e,i){return i!==t.trip.route.points.length-1}))),e},getListPointDown:function(){var t=this,e=null;return this.trip.route&&(e=this.trip.route.points.filter((function(e,i){return 0!==i&&e.id!==t.pickUpAddress}))),e},routeProfit:function(){var t=.3;return this.trip.route&&(t=this.trip.route.profit),t},totalPrice:function(){var t=this.trip.baseTicketPrice*this.totalPassengers;return t},discountPriceNow:function(){if(!this.trip.route||!this.trip.vehicle)return 0;var t=this.trip.route?this.trip.route.distance:this.trip.distance,e=this.trip.vehicle.minDistance?this.trip.vehicle.minDistance:0,i=parseInt(((e>t?e:t)*this.trip.vehicle.pricePerKm+this.trip.planTrip.additionMoney)*(1+this.routeProfit)),s=this.trip.numberTicketPaid+this.totalPassengers,a=parseInt(i/s);return this.trip.baseTicketPrice>a?(this.trip.baseTicketPrice-a)*this.totalPassengers:0},discountPriceMax:function(){if(!this.trip.route||!this.trip.vehicle)return 0;var t=parseInt((this.trip.route.distance*this.trip.vehicle.pricePerKm+this.trip.planTrip.additionMoney)*(1+this.routeProfit)),e=this.trip.vehicle.totalSeat,i=parseInt(t/e),s=this.trip.baseTicketPrice;return 0===s&&(s=parseInt(t/e*60/100)),(s-i)*this.totalPassengers},promotionDiscount:function(){var t=0;if(this.promotionResponse){var e=parseInt(this.totalPrice/this.totalPassengers)*this.promotionResponse.discount;t=e<this.promotionResponse.maxDiscountValue?e*this.totalPassengers:this.promotionResponse.maxDiscountValue*this.totalPassengers}else t=0;return t+=this.discountTicket,t},remainPrice:function(){var t=this.trip.baseTicketPrice*this.totalPassengers-this.discountPriceNow;return t},discountTicket:function(){var t=this.userInfo&&this.userInfo.discountTicket?this.totalPrice*this.userInfo.discountTicket:0;return t},getPointUpManual:function(){var t=null;if(this.trip.pointManual){var e=JSON.parse(this.trip.pointManual);t=e.filter((function(t,i){return i!==e.length-1}))}return t},getPointDownManual:function(){var t=this,e=null;if(this.trip.pointManual){var i=JSON.parse(this.trip.pointManual);e=i.filter((function(e,i){return 0!==i&&e.placeId!==t.pickUpAddress}))}return e}}),watch:{listIndexTotalPassengers:function(t){this.totalPassengers=this.listIndexTotalPassengers.length},pickUpAddress:function(t){t&&(this.pointActive="point-down")},pickUpAddressManual:function(t){t&&(this.pointActive="point-down")},"firstCustomerInfo.fullname":function(t){if(this.fillAllCustomer)for(var e=0;e<this.$refs.FormCustomerInfo.length;e++)this.$refs.FormCustomerInfo[e].customerInfo.fullname=t},"firstCustomerInfo.phoneNumber":function(t){if(this.fillAllCustomer)for(var e=0;e<this.$refs.FormCustomerInfo.length;e++)this.$refs.FormCustomerInfo[e].customerInfo.phoneNumber=t},"firstCustomerInfo.email":function(t){if(this.fillAllCustomer)for(var e=0;e<this.$refs.FormCustomerInfo.length;e++)this.$refs.FormCustomerInfo[e].customerInfo.email=t},"firstCustomerInfo.sex":function(t){if(this.fillAllCustomer)for(var e=0;e<this.$refs.FormCustomerInfo.length;e++)this.$refs.FormCustomerInfo[e].customerInfo.sex=t}},created:function(){this.customerInfos.length>0&&(this.customerInfos=[]),this.$store.dispatch("promotion/resetPromotionResp")},mounted:function(){this.trip.route?(this.pickUpAddress=this.trip.route.points[0].id,this.pickDownAddress=this.trip.route.points[this.trip.route.points.length-1].id):(this.getPointUpManual||this.getPointDownManual)&&(this.pickUpAddressManual=this.getPointUpManual[0].placeId,this.pickDownAddressManual=this.getPointDownManual[this.getPointDownManual.length-1].placeId)},methods:{handelFormCustomerActive:function(t){this.labelFormCustomerActive=t},getActivePoint:function(t){"point-up"===t&&(this.pointActive=t),"point-down"===t&&(this.pickUpAddress?this.pointActive=t:this.$message.error(this.$t("message.book.selectPointUp")))},validateCustomerInfo:function(){var t=new RegExp(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/);return this.pickUpAddress?this.pickDownAddress?this.validate.length>0?(this.$message.error(this.$t("message.book.enterCorrectPassengerInfo")),!1):this.exportInvoice&&!this.invoiceInfo.companyName?(this.$message.error(this.$t("message.book.enterCompanyName")),!1):this.exportInvoice&&!this.invoiceInfo.address?(this.$message.error(this.$t("message.book.enterAddress")),!1):this.exportInvoice&&!this.invoiceInfo.tax?(this.$message.error(this.$t("message.book.enterTax")),!1):!!(!this.exportInvoice||this.invoiceInfo.email&&t.test(this.invoiceInfo.email))||(this.$message.error(this.$t("message.book.enterEmail")),!1):(this.$message.error(this.$t("message.book.selectPointDown")),!1):(this.$message.error(this.$t("message.book.selectPointUp")),!1)},handleBookTicket:function(){var t=this;if(this.validateCustomerInfo()){var e=[];if(this.$refs.FormCustomerInfo.forEach((function(t,i){if(0===t.validate.length&&t.customerInfo.fullname&&t.customerInfo.phoneNumber&&t.customerInfo.email&&t.customerInfo.sex){var s={fullName:t.customerInfo.fullname,phoneNumber:t.customerInfo.phoneNumber,email:t.customerInfo.email,sex:t.sexLabel[t.customerInfo.sex]};e.push(s)}})),this.customerInfos=e,this.referralUser=this.$refs.FormCustomerInfo[0].customerInfo.referralUser,this.customerInfos.length<this.totalPassengers)this.$message.error(this.$t("message.book.enterFullCustomerInfo",{totalPassengers:this.totalPassengers}));else{var i={tripId:this.trip.id,personInfos:this.customerInfos,pointUpId:this.pickUpAddress,pointDownId:this.pickDownAddress,referralUser:this.referralUser,promotionCode:this.promotionResponse?this.promotionResponse.code:"",pointUpManual:this.pickUpAddressManual,pointDownManual:this.pickDownAddressManual,exportInvoice:this.exportInvoice,invoiceInfo:this.exportInvoice?this.invoiceInfo:null};this.loadingBookTicket=!0,setTimeout((function(){t.$store.dispatch("ticket/bookTicket",i).then((function(e){t.$message.success(t.$t("message.book.bookTicketSuccess")),t.$router.push({name:"pay",query:{ticket:e[0].ticketCode}}),t.loadingBookTicket=!1})).catch((function(e){console.log(e),t.$message.error(e.message?e.message:t.$t("message.common.undefinedError")),t.loadingBookTicket=!1}))}),500)}}},handlePassengersChange:function(t,e){var i,s=[];for(i=1;i<=t;i++)s.push(i);this.listIndexTotalPassengers=s,this.totalPassengers=this.listIndexTotalPassengers.length},removeFormCustomer:function(t){var e=this.listIndexTotalPassengers.indexOf(t);e>-1&&this.listIndexTotalPassengers.splice(e,1);var i=this.validate.filter((function(e){return e.index!==t}));this.$store.dispatch("trip/validateInfo",i)}}},O=M,E=(i("5588"),i("8db4"),Object(d["a"])(O,S,$,!1,null,"2a7dd2a4",null)),R=E.exports,U=i("2e61"),N={components:{MoreInfoTrip:x,SelectedTrip:R,FormShareLink:U["a"]},props:{trip:{default:null,type:Object},statusMoreInfoSection:{default:null,type:Number},statusSelectedTripSection:{default:null,type:Number}},data:function(){return{userCreated:{size:24,avatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",name:"abcxyz"},dialogShareTrip:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(l["b"])(["userInfo","token"])),{},{formatStartTime:function(){var t=this.$moment.utc(this.trip.runTime).format("HH:mm");return t},formatStartDate:function(){var t=new Date(this.trip.runTime).getTime();return this.$moment.utc(t).format("DD/MM/YYYY")},formatDistanceTime:function(){var t=Object(A["f"])(this.trip.finishTime);return t},formatEndTime:function(){var t="",e=this.$moment.utc(this.trip.runTime).format("YYYY/MM/DD HH:mm:ss"),i=new Date(e).getTime(),s=i+this.trip.finishTime,a=this.$moment(s).format("HH:mm");return t=a,t},formatEndDate:function(){var t=new Date(this.trip.runTime).getTime(),e=t+this.trip.finishTime;return this.$moment.utc(e).format("DD/MM/YYYY")},moreInfoStatus:{get:function(){return this.statusMoreInfoSection},set:function(t){this.$emit("set-status-more-info-section",t)}},selectedTripStatus:{get:function(){return this.statusSelectedTripSection},set:function(t){this.$emit("set-status-selected-trip-section",t)}},allowBookTicket:function(){var t=new Date(this.trip.runTime),e=t.getTime()-252e5,i=new Date,s=i.getTime();return e-s>0},getPointManual:function(){var t=null;return this.trip.pointManual&&(t=JSON.parse(this.trip.pointManual)),t}}),methods:{openMoreInfoSection:function(){if(this.selectedTripStatus&&(this.selectedTripStatus=null),this.moreInfoStatus&&this.moreInfoStatus===this.trip.id)return this.moreInfoStatus=null,!1;this.moreInfoStatus&&this.selectedTripStatus===this.trip.id||(this.moreInfoStatus=this.trip.id)},openSelectedTripSection:function(){if(this.token){if(this.moreInfoStatus&&(this.moreInfoStatus=null),this.selectedTripStatus&&this.selectedTripStatus===this.trip.id)return this.selectedTripStatus=null,!1;this.selectedTripStatus&&this.moreInfoStatus===this.trip.id||(this.selectedTripStatus=this.trip.id)}else confirm(this.$t("message.book.checkLoginBookTicket"))&&this.$router.push({path:"login?redirect=book"})},shareTrip:function(){this.dialogShareTrip=!0}}},B=N,Y=(i("8e1f"),i("9f08"),Object(d["a"])(B,k,C,!1,null,"46a18460",null)),F=Y.exports,j=i("779c"),L={components:{Trip:F,FormCreateTrip:j["a"]},data:function(){return{moreInfoStatus:null,selectedTripStatus:null,loading:!1,mapStartPoint:null,mapEndPoint:null}},computed:Object(o["a"])(Object(o["a"])({},Object(l["b"])(["token","trips","dateAndPoint","provinces"])),{},{getDateAndPoint:function(){var t=this.dateAndPoint;return"string"===typeof t?t=JSON.parse(this.dateAndPoint):"object"===Object(b["a"])(t)&&(t=this.dateAndPoint),t}}),watch:{getDateAndPoint:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$route.query.tripId||this.$route.params.tripId){t.next=5;break}return this.mapStartPoint=this.provinces.find((function(t){return t.provinceName===i.getDateAndPoint.from})),this.mapEndPoint=this.provinces.find((function(t){return t.provinceName===i.getDateAndPoint.to})),t.next=5,this.getListTrip();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),"$route.query":function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.tripId){t.next=3;break}return t.next=3,this.getListTrip();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("route/getProvinces");case 2:if(t.mapStartPoint=t.getDateAndPoint?t.provinces.find((function(e){return e.provinceName===t.getDateAndPoint.from})):null,t.mapEndPoint=t.getDateAndPoint?t.provinces.find((function(e){return e.provinceName===t.getDateAndPoint.to})):null,!t.$route.query.tripId&&!t.$route.params.tripId){e.next=10;break}return t.$route.query.tripId?t.moreInfoStatus=parseInt(t.$route.query.tripId):t.$route.params.tripId&&(t.moreInfoStatus=parseInt(t.$route.params.tripId)),e.next=8,t.getTripByTripId();case 8:e.next=12;break;case 10:return e.next=12,t.getListTrip();case 12:case"end":return e.stop()}}),e)})))()},methods:{setStatusMoreInfoSection:function(t){this.moreInfoStatus=t},setStatusSelectedTripSection:function(t){this.selectedTripStatus=t},getListTrip:function(){var t=this,e={from:this.mapStartPoint&&this.mapStartPoint.id?this.mapStartPoint.id:void 0,to:this.mapEndPoint&&this.mapEndPoint.id?this.mapEndPoint.id:void 0,startDate:this.getDateAndPoint?this.getDateAndPoint.startDate:""};this.loading=!0,this.$store.dispatch("trip/getListTrip",e).then((function(e){t.trips.length>0?t.trips.map((function(e,i){var s=Object(A["f"])(e.runTime),a=Object(A["a"])(parseInt(s.hours),parseInt(s.minutes),parseInt(s.seconds));t.trips[i]=Object(o["a"])(Object(o["a"])({},e),{},{runTimeMilliseconds:a})})):t.$message.warning(t.$t("message.book.communityNotCreateTrip",{startDate:t.$moment(t.getDateAndPoint.startDate).format("DD-MM-YYYY")})),t.loading=!1})).catch((function(e){t.loading=!1,t.$message.error(e.message?e.message:t.$t("message.common.undefinedError")),console.log(e)}))},getTripByTripId:function(){var t=this;this.loading=!0;var e=0;this.$route.query.tripId?e=this.$route.query.tripId:this.$route.params.tripId&&(e=this.$route.params.tripId),this.$store.dispatch("trip/getTripByTripId",{tripId:e}).then((function(e){t.trips.map((function(e,i){var s=Object(A["f"])(e.runTime),a=Object(A["a"])(parseInt(s.hours),parseInt(s.minutes),parseInt(s.seconds));t.trips[i]=Object(o["a"])(Object(o["a"])({},e),{},{runTimeMilliseconds:a})})),t.$store.dispatch("trip/getPointAndDate",{from:t.trips[0].route?t.trips[0].route.points[0].district.provinceName:null,to:t.trips[0].route?t.trips[0].route.points[t.trips[0].route.points.length-1].district.provinceName:null,startDate:t.$moment.utc(t.trips[0].runTime).format("YYYY-MM-DD")}),t.loading=!1})).catch((function(e){t.loading=!1,t.$message.error(t.$t("message.common.undefinedError")),console.log(e)}))},handleCreateTrip:function(){this.token?this.$router.push({name:"CreateTrip"}):confirm(this.$t("message.book.checkLoginCreateTrip"))&&this.$router.push({name:"Login"})}}},H=L,J=(i("e8c1"),Object(d["a"])(H,h,v,!1,null,"3ee3edfb",null)),K=J.exports,Q=i("9341"),V={components:{FilterTrip:f,ListTrip:K,StepBoxTicket:Q["a"]},data:function(){return{drawer:{status:!1,direction:"rtl"}}},created:function(){window.addEventListener("resize",this.handleDrawerWhenScreenResize)},destroyed:function(){window.removeEventListener("resize",this.handleDrawerWhenScreenResize)},methods:{handleDrawerWhenScreenResize:function(t){t.target.screen.width<=991&&this.drawer.status&&(this.drawer.status=!0)}}},W=V,X=(i("d691"),Object(d["a"])(W,s,a,!1,null,null,null));e["default"]=X.exports},"507a":function(t,e,i){},5588:function(t,e,i){"use strict";i("189d")},"5cb5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAoVJREFUaIHtl0F22jAQhv+R6ZI8H0FxtzHlBk1PEGcfqDlB0xMAJ2h7Avyg+6YnaHOC+D3Ylrg38L6xJotCsSVjG0hho29nacb8w0gzY8BisVgsFovFYjkV1MRIysA9E+2QgbcE6jIg63zmy2nh3b7X51oxjJiJExC+z3/NoibaagPw5U0AISYA3CYvXLNPABoJiMd1gYiqzY73/hOE+IYdxb8QEkyTjtcfVhm1tm10vP6QwbclWymAlJmTXdQw889qC3KJ0DX8gJHv9dz5cvax1Kts0Ze9EIIm2nLCSg1aaMVxEqUNde/M6reH0O+ZUtfz5Oudbl8egNd/LL6A7hxFg/8pPE9Xhm4msglAQW45dZQ41zUYd8CXvRDF6JNjigeAOIlSRzkDAPlj6v4RWajbmpfYwVXhmXh8TPFr4iRKWalBfk0wXep2xiVmJpk/V3VlbI/yWEAvt3laaMUZVIp1FSS80W2MDBA2lYAZ8SHiDmWV+Xz2jQZa2QeITlL/C3AxAIOyAAoXpyvDkwZRdyLMRkYcg2mdKvcJT10AW5tQ1Rk+lFVF3EgDfus2RgYU477gJMTkFFmQMnBXDW2DYKORGQG8Uk4E7eJkIjtqEFIGblu0J9D6UVlFNAKIkyiFVn8BCjKhHvzXPaORvCRSBu6FvLlsi7MHrQsDxOMyn63n98LrfybgQ6kTI2ZwZXWYP87e5Z/9896PKnsikvy33huZZmC8WE5HZX5bp9HFcnp74fVTAoxxlgndht9CeYVGF9VEblv/sk08UNMHFsvpCIr1meRYpFDqerGclo30/2j8N/qyF7LAFZhk2dyus+cXWcLgWAD3QjnRKWYwi8VisVgsFoulOc826u1knO/3ywAAAABJRU5ErkJggg=="},"731a":function(t,e,i){},"748c":function(t,e,i){},"8db4":function(t,e,i){"use strict";i("731a")},"8e1f":function(t,e,i){"use strict";i("748c")},9341:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box-step-to-book-ticket"},[i("div",{staticClass:"container"},[i("div",{staticClass:"w-100"},[i("div",{staticClass:"row no-gutters process-booking"},[i("div",{staticClass:"col-md",attrs:{id:"select-trip"}},[t._m(0),i("div",{staticClass:"route-info"},[i("div",{staticClass:"route"},[i("div",{staticClass:"province-name"},[t.getDateAndPoint&&t.getDateAndPoint.from?i("span",{attrs:{id:"start-point"}},[t._v(t._s(t.getDateAndPoint.from))]):t._e(),t.getDateAndPoint&&t.getDateAndPoint.from&&t.getDateAndPoint.to?i("span",[t._v(" - ")]):t._e(),t.getDateAndPoint&&t.getDateAndPoint.to?i("span",{attrs:{id:"end-point"}},[t._v(t._s(t.getDateAndPoint.to))]):t._e()]),"payment"!==t.$route.name?i("a",{style:{"padding-left":t.getDateAndPoint?"8px":""},attrs:{href:""},on:{click:function(e){e.preventDefault(),t.reselectRoute=!0}}},[t._v("Chọn lại")]):t._e()]),i("div",{staticClass:"date"},[i("p",[t._v(t._s(t.getDateAndPoint?t.$moment(t.getDateAndPoint.startDate).format("DD/MM/YYYY"):""))])])])]),t._m(1),i("div",{staticClass:"col-md",attrs:{id:"booking"}},[i("div",{staticClass:"title",class:["pay"===t.$route.name?"active":""]},[i("span",{staticClass:"text-step"},[t._v("3. ")]),i("span",{staticClass:"text-title"},[t._v("Tiến hành thanh toán")])])])])])]),i("el-dialog",{attrs:{visible:t.reselectRoute,width:"74%"},on:{"update:visible":function(e){t.reselectRoute=e}}},[i("search-trip",{model:{value:t.reselectRoute,callback:function(e){t.reselectRoute=e},expression:"reselectRoute"}})],1)],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title active"},[i("span",{staticClass:"text-step"},[t._v("1. ")]),i("span",{staticClass:"text-title"},[t._v("Chọn chuyến")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-md",attrs:{id:"select-trip-and-enter-info"}},[i("div",{staticClass:"title active"},[i("span",{staticClass:"text-step"},[t._v("2. ")]),i("span",{staticClass:"text-title"},[t._v("Chọn chuyến và nhập thông tin")])])])}],n=i("53ca"),r=i("5530"),o=(i("7db0"),i("d3b7"),i("9358")),c=i("2f62"),l={name:"StepBookTicket",components:{SearchTrip:o["a"]},data:function(){return{reselectRoute:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(c["b"])(["provinces","dateAndPoint"])),{},{getDateAndPoint:function(){var t=this.dateAndPoint;return"string"===typeof t?t=JSON.parse(this.dateAndPoint):"object"===Object(n["a"])(t)&&(t=this.dateAndPoint),t},mapStartPoint:function(){var t=this,e=this.getDateAndPoint?this.provinces.find((function(e,i){return e.id===t.getDateAndPoint.from})):null;return e},mapEndPoint:function(){var t=this,e=this.getDateAndPoint?this.provinces.find((function(e,i){return e.id===t.getDateAndPoint.to})):null;return e}}),methods:{}},p=l,u=(i("c8c6"),i("1343"),i("2877")),d=Object(u["a"])(p,s,a,!1,null,"72209bdd",null);e["a"]=d.exports},"9d3f":function(t,e,i){"use strict";i("cf22")},"9f08":function(t,e,i){"use strict";i("0bd7")},aaa9:function(t,e,i){"use strict";i("208d")},af48:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA1FJREFUaIHtmb9WGkEUxr87i0kaDUljO5LGQglvILwBdhYGyROITyA+gfAEWSFFOtOmEt+ACDknTcimtXHTRpmbApIos7PM/gHNkd85NLMzO/fOXO6d+RZYsOBxQ2m9aEPuFoWgAgNbBCowkMXoBwA+MTwm9hj0GUp1+t77ThrzJnJAynJ2RazsM1DDP2Nt8QDuXKvro6/eBy+uDbEcGBn+/JDBtbgT34XduI44UQfkc5X9J/T0I4Bi1LFmqOCQU159mf95eXXRjTIykgP53N4xA3UAzyLZZ0cWoPLqi3z28urik+0gqxCSspxdpuVTEKW46iEwdxx2true60/rKmzeN1fjAYCoOKThqU3XqSGUz+0dg7CT3KqIEEmbcAoNoU35pgpB7xKY4TPQvFG/XFOG2cxVONxAPrgYtBvm5wbW5Y5cEk/OAEhrc2/DOHFY1KbF8TQHAPiOEmum92RMo5bE0iFiGs9As/+9lVKNQHYohocADoIeBv6J1+WOBKgac0Ivo0Q95lgDVCvIamClD3RgvPox5+Ijm/QXlRuhAnfUkEbjp8zh0IlUSW0hYN/QfpcNuVskIc7iTtQbtAITQ/5VZY8ZDUQ/9P2FlSpNnmL1HRBiJgWLGXUkMB4AWFBhsk1zgIhfJ5kkhHjp+BaC9dDWHGCmxBPNDIK2uPoOpLBSM0QLwaAslChOZ4xmm7ES22LKOrb9LI4SoQTtQOpFKEU02/4rB5ihnWh1B4hnUknTgIAfk22aA4pxPh9zosMEbXH1NKoe7g5AKU0MM2WGK8RMp7PKNgC83qC1NtkYeBploJlwshlAgVJkoAMZJYx30PvCUXQU1B7oQNdz/Ye1C+R2PTdQFDDqQuNr4UOoCZ5p9YEQB7qe6xPYOHBujK6oRtE3VJm7GLQb9xlKDDR739puWJ+p0mJ/0KqBOZWPEVFgRrc/mC7NWGmjDjvb83SCmTsZFiWbvlbH6bFMUtrIVRomdSAtRqJY21oUs9qBP/QHrRoUvwX0U2EK+Ap8YBM2t4nkAAD0vLbrKFEC4yTqWBMMNB0l1r6EiLgmEn3kK8iqHJKqg7CF8V06wlnIZ6CZUaKRRMlLdKUc5+cqMBLEpmhKHoO7AjhXirtpfWZdsOCx8xtvtDS7COwvQAAAAABJRU5ErkJggg=="},c8c6:function(t,e,i){"use strict";i("507a")},cf22:function(t,e,i){},d691:function(t,e,i){"use strict";i("10d7")},e8c1:function(t,e,i){"use strict";i("04fc")},ffb0:function(t,e,i){"use strict";i("02e1")}}]);