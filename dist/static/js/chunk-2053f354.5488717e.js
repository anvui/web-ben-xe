(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2053f354"],{"08f3":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return n}));var s={CANCELED:0,NEW:1,BOOKED:2,BOUGHT:3,ON_THE_TRIP:4,COMPLETED:5},n={TRIP:1,ROUTE:2,VEHICLE:3,COMPANY:4,KBUS:5}},"1ab8":function(t,e,i){"use strict";i("a6fb")},"1bba":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.labelFormCustomerActive===t.getIndexForm?i("el-form",{ref:"customerInfo",staticClass:"customer-info-form pt-3",attrs:{id:"form-customer-info",model:t.customerInfo,rules:t.formCustomerRules,"auto-complete":"on","label-position":"left"},on:{validate:t.validateForm}},[i("el-form-item",{attrs:{prop:"fullname"}},[i("el-input",{ref:"fullname",staticClass:"form-input",attrs:{name:"fullname",type:"text",tabindex:"1"},model:{value:t.customerInfo.fullname,callback:function(e){t.$set(t.customerInfo,"fullname",e)},expression:"customerInfo.fullname"}}),i("label",{staticClass:"custom-placeholder"},[t._v(t._s(t.$t("book.formCustomerInfo.fullName"))+" "),i("span",{staticStyle:{color:"red"}},[t._v("*")])])],1),i("el-form-item",{attrs:{prop:"phoneNumber"}},[i("el-input",{ref:"phoneNumber",staticClass:"form-input",attrs:{name:"phoneNumber",type:"text",tabindex:"2"},model:{value:t.customerInfo.phoneNumber,callback:function(e){t.$set(t.customerInfo,"phoneNumber",e)},expression:"customerInfo.phoneNumber"}}),i("label",{staticClass:"custom-placeholder"},[t._v(t._s(t.$t("book.formCustomerInfo.phoneNumber"))+" "),i("span",{staticStyle:{color:"red"}},[t._v("*")])])],1),i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{ref:"email",staticClass:"form-input",attrs:{name:"email",type:"text",tabindex:"3"},model:{value:t.customerInfo.email,callback:function(e){t.$set(t.customerInfo,"email",e)},expression:"customerInfo.email"}}),i("label",{staticClass:"custom-placeholder"},[t._v(t._s(t.$t("book.formCustomerInfo.email"))+" "),i("span",{staticStyle:{color:"red"}},[t._v("*")])])],1),i("el-form-item",{attrs:{prop:"note"}},[i("el-input",{ref:"note",staticClass:"form-input",attrs:{name:"note",type:"text",tabindex:"3"},model:{value:t.customerInfo.note,callback:function(e){t.$set(t.customerInfo,"note",e)},expression:"customerInfo.note"}}),i("label",{staticClass:"custom-placeholder"},[t._v(t._s(t.$t("book.formCustomerInfo.note"))+" "),i("span",{staticStyle:{color:"red"}},[t._v("*")])])],1),i("el-form-item",["OrderPage"===t.$route.name||"CreateTrip"===t.$route.name?i("el-checkbox",{attrs:{value:t.fillAllCustomer},on:{change:t.handleFillAll}},[t._v(" "+t._s(t.$t("book.formCustomerInfo.btnFillAll"))+" ")]):t._e()],1)],1):t._e()},n=[],o=i("5530"),a=(i("a9e3"),i("ac1f"),i("00b4"),i("a434"),i("2f62")),r={props:{labelFormCustomerActive:{type:[Number,String,Array],default:1},value:{type:Array,default:null},tripId:{type:[Number,String,Array],default:0},passengerInfo:{type:Object,default:null}},data:function(){return{formCustomerRules:{},customerInfo:{ticketId:null,fullname:"",phoneNumber:"",email:"",note:"",sex:1,referralUser:this.$route.params.referralUser||"",promotionCode:""},sexLabel:{1:"MALE",2:"FEMALE"},loadingConfirmPromotion:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(a["c"])(["promotionResponse","userInfo","validate","fillAllCustomer","firstCustomerInfo"])),{},{getIndexForm:function(){return this.$vnode.key}}),watch:{fillAllCustomer:function(t){t?(this.validate.length>0&&this.$store.dispatch("trip/validateInfo",[]),this.getIndexForm>1&&(this.customerInfo.fullname=this.firstCustomerInfo.fullname,this.customerInfo.phoneNumber=this.firstCustomerInfo.phoneNumber,this.customerInfo.email=this.firstCustomerInfo.email,this.customerInfo.note=this.firstCustomerInfo.note,this.customerInfo.sex=this.firstCustomerInfo.sex)):this.getIndexForm>1&&(this.customerInfo.fullname="",this.customerInfo.phoneNumber="",this.customerInfo.email="",this.customerInfo.note="",this.customerInfo.sex=1)},"customerInfo.fullname":function(t,e){t&&this.fillAllCustomer&&(this.firstCustomerInfo.fullname=t)},"customerInfo.phoneNumber":function(t,e){t&&this.fillAllCustomer&&(this.firstCustomerInfo.phoneNumber=t)},"customerInfo.email":function(t,e){t&&this.fillAllCustomer&&(this.firstCustomerInfo.email=t)},"customerInfo.note":function(t,e){t&&this.fillAllCustomer&&(this.firstCustomerInfo.note=t)},"customerInfo.sex":function(t,e){t&&this.fillAllCustomer&&(this.firstCustomerInfo.sex=t)},"customerInfo.promotionCode":function(t){this.firstCustomerInfo.promotionCode=t},"firstCustomerInfo.promotionCode":function(t){this.customerInfo.promotionCode=t}},mounted:function(){this.setDataCustomerInfo()},methods:{setDataCustomerInfo:function(){if(this.firstCustomerInfo&&this.firstCustomerInfo.promotionCode&&(this.customerInfo.promotionCode=this.firstCustomerInfo.promotionCode),1===this.getIndexForm){this.customerInfo.fullname=this.userInfo?this.userInfo.fullName:"",this.customerInfo.phoneNumber=this.userInfo?this.userInfo.phoneNumber:"",this.customerInfo.email=this.userInfo?this.userInfo.email:"",this.customerInfo.note=this.userInfo?this.userInfo.note:"";var t=this.customerInfo;this.$store.dispatch("trip/firstCustomerInfo",t)}else this.fillAllCustomer&&(this.customerInfo.fullname=this.firstCustomerInfo?this.firstCustomerInfo.fullname:"",this.customerInfo.phoneNumber=this.firstCustomerInfo?this.firstCustomerInfo.phoneNumber:"",this.customerInfo.email=this.firstCustomerInfo?this.firstCustomerInfo.email:"",this.customerInfo.note=this.firstCustomerInfo?this.firstCustomerInfo.note:"",this.customerInfo.sex=this.firstCustomerInfo?this.firstCustomerInfo.sex:"");this.passengerInfo&&(this.customerInfo.ticketId=this.passengerInfo.ticketId,this.customerInfo.fullname=this.passengerInfo.fullName,this.customerInfo.phoneNumber=this.passengerInfo.phoneNumber,this.customerInfo.email=this.passengerInfo.email,this.customerInfo.note=this.passengerInfo.note,this.customerInfo.sex="MALE"===this.passengerInfo.sex?1:2)},validateForm:function(t,e,i){var s={field:t,valid:e,message:i,index:this.getIndexForm},n=this.validate;if(e){if(this.containsValidate(s,n)){var o=this.containsValidate(s,n),a=n.indexOf(o);a>-1&&n.splice(a,1)}}else this.containsValidate(s,n)||n.push(s);this.$store.dispatch("trip/validateInfo",n)},containsValidate:function(t,e){var i;for(i=0;i<e.length;i++)if(e[i].field===t.field&&e[i].index===t.index)return e[i];return null},handleFillAll:function(t){this.$store.dispatch("trip/fillAllCustomer",t)},handleValueChange:function(){},confirmPromotion:function(){var t=this;this.loadingConfirmPromotion=!0,this.$store.dispatch("promotion/getRespPromotion",{promotionCode:this.customerInfo.promotionCode,tripId:this.tripId}).then((function(e){t.loadingConfirmPromotion=!1,t.$message.success(t.$t("message.book.applyPromotion"))})).catch((function(e){t.loadingConfirmPromotion=!1,console.log(e),t.$message.error(e.message?e.message:t.$t("message.common.undefinedError"))}))},removePromotion:function(){this.customerInfo.promotionCode="",this.$store.dispatch("promotion/resetPromotionResp")}}},c=r,l=(i("d000"),i("ae0d"),i("2877")),u=Object(l["a"])(c,s,n,!1,null,"518be5a6",null);e["a"]=u.exports},2447:function(t,e,i){},"2e61":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-share-link"},[s("el-dialog",{attrs:{visible:t.value,width:"50%"},on:{close:t.handleClose}},[s("div",{staticClass:"w-100"},[s("div",{staticClass:"col-12 text-center title"},[t._v(t._s(t.$t("formShareLink.title")))]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.dataForm.title,expression:"dataForm.title"}],staticClass:"form-input",attrs:{type:"text"},domProps:{value:t.dataForm.title},on:{input:function(e){e.target.composing||t.$set(t.dataForm,"title",e.target.value)}}}),s("label",{staticClass:"desc popup-text"},[t._v(t._s(t.$t("formShareLink.field.title")))])]),s("div",{staticClass:"form-field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.dataForm.description,expression:"dataForm.description"}],staticClass:"form-input",attrs:{type:"text"},domProps:{value:t.dataForm.description},on:{input:function(e){e.target.composing||t.$set(t.dataForm,"description",e.target.value)}}}),s("label",{staticClass:"desc popup-text"},[t._v(t._s(t.$t("formShareLink.field.description")))])])]),s("div",{staticClass:"btn-wrapper"},[s("el-button",{staticClass:"btn-signup",attrs:{loading:t.loadingGetLink},on:{click:function(e){return e.stopPropagation(),t.handleGetLink()}}},[s("span",[t._v(t._s(t.$t("formShareLink.btnGetLink")))]),s("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M5.40995 21.75C4.28995 21.75 3.57995 21.37 3.12995 20.92C2.24995 20.04 1.62995 18.17 3.60995 14.2L4.47995 12.47C4.58995 12.24 4.58995 11.76 4.47995 11.53L3.60995 9.80002C1.61995 5.83002 2.24995 3.95002 3.12995 3.08002C3.99995 2.20002 5.87995 1.57002 9.83995 3.56002L18.3999 7.84002C20.5299 8.90002 21.6999 10.38 21.6999 12C21.6999 13.62 20.5299 15.1 18.4099 16.16L9.84995 20.44C7.90995 21.41 6.46995 21.75 5.40995 21.75ZM5.40995 3.75002C4.86995 3.75002 4.44995 3.88002 4.18995 4.14002C3.45995 4.86002 3.74995 6.73002 4.94995 9.12002L5.81995 10.86C6.13995 11.51 6.13995 12.49 5.81995 13.14L4.94995 14.87C3.74995 17.27 3.45995 19.13 4.18995 19.85C4.90995 20.58 6.77995 20.29 9.17995 19.09L17.7399 14.81C19.3099 14.03 20.1999 13 20.1999 11.99C20.1999 10.98 19.2999 9.95002 17.7299 9.17002L9.16995 4.90002C7.64995 4.14002 6.33995 3.75002 5.40995 3.75002Z",fill:"white"}}),s("path",{attrs:{d:"M10.8399 12.75H5.43994C5.02994 12.75 4.68994 12.41 4.68994 12C4.68994 11.59 5.02994 11.25 5.43994 11.25H10.8399C11.2499 11.25 11.5899 11.59 11.5899 12C11.5899 12.41 11.2499 12.75 10.8399 12.75Z",fill:"white"}})])])],1)]),t.linkShare?s("div",{staticClass:"share"},[s("span",{staticClass:"description"},[t._v(t._s(t.$t("formShareLink.inviteFriend.title")))]),s("div",{staticClass:"list-icon"},[s("el-button",{attrs:{title:"Copy to clipboard"},on:{click:function(e){return e.preventDefault(),t.shareTrip("url")}}},[s("img",{attrs:{src:i("5cb5"),alt:"copy to clipboard"}})]),s("el-button",{attrs:{href:"",title:"Share to facebook"},on:{click:function(e){return e.preventDefault(),t.shareTrip("fb")}}},[s("img",{attrs:{src:i("af48"),alt:"share to fb"}})])],1)]):t._e()])],1)},n=[],o=i("5530"),a=(i("b0c0"),i("a4d3"),i("e01a"),i("ed08")),r=i("2f62"),c={props:{value:{type:Boolean,default:!1},trip:{type:Object,default:null}},data:function(){return{dataForm:{title:this.$t("formShareLink.field.dataTitle")||"",description:""},loadingGetLink:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["linkShare","userInfo"])),{},{getPathUrl:function(){return window.location.origin},getPointManual:function(){if(this.trip.pointManual){var t=JSON.parse(this.trip.pointManual);return t[0].name&&!t[t.length-1].name?t[0].name:t[t.length-1].name&&!t[0].name?t[t.length-1].name:t[0].name&&t[t.length-1].name?t[0].name+" - "+t[t.length-1].name:""}return null}}),watch:{value:function(t){t&&this.$store.dispatch("component/resetLink")},trip:function(t){var e=null;this.trip.route?e=this.trip.route.routeName:this.getPointManual&&(e=this.getPointManual),this.dataForm.description=e+", "+this.$moment.utc(this.trip.runTime).format("DD/MM/YYYY HH:mm")}},mounted:function(){this.trip.route?this.dataForm.description=this.trip.route.routeName+", "+this.$moment.utc(this.trip.runTime).format("DD/MM/YYYY HH:mm"):this.getPointManual&&(this.dataForm.description=this.getPointManual+", "+this.$moment.utc(this.trip.runTime).format("DD/MM/YYYY HH:mm"))},methods:{handleGetLink:function(){var t=this;this.loadingGetLink=!0;var e=null;e=this.trip.route&&this.trip.route.images.length>0?this.trip.route.images[0]:!this.trip.route&&this.userInfo?this.userInfo.avatar:"https://kbus.vn/static/img/logo-kbus.db912338.png",setTimeout((function(){t.$store.dispatch("component/generateLink",{title:t.dataForm.title,description:t.dataForm.description,imageUrl:e,referralUser:t.userInfo&&t.userInfo.userName?t.userInfo.userName:"",tripId:t.trip.id}).then((function(e){t.loadingGetLink=!1})).catch((function(e){t.loadingGetLink=!1,console.log(e),t.$message.error(e.message?e.message:t.$t("message.common.undefinedError"))}))}),500)},shareTrip:function(t){switch(t){case"url":Object(a["d"])(this.linkShare.shortLink);break;case"fb":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(this.linkShare.shortLink),"_blank")}},handleClose:function(){this.$emit("input",!1)}}},l=c,u=(i("c539"),i("1ab8"),i("2877")),m=Object(u["a"])(l,s,n,!1,null,"010cf5c3",null);e["a"]=m.exports},"31e6":function(t,e,i){"use strict";i("d774")},3579:function(t,e,i){"use strict";i("5e27")},4403:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container mt-4"},[i("div",{staticClass:"booked-history-wrapper"},[i("div",{staticClass:"row no-gutters",staticStyle:{"justify-content":"space-between"}},[i("div",{staticClass:"col-auto"},[i("h4",{staticClass:"title"},[t._v(t._s(t.$t("history.title")))])]),i("div",{staticClass:"col text-right"},[i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(e){return t.getTickets()}}},[t._v(t._s(t.$t("history.btnRefresh")))])],1)]),i("el-tabs",{staticStyle:{"margin-top":"1rem"},attrs:{type:"border-card"},on:{"tab-click":t.handleClickTab},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[t._l(t.listTabs,(function(e,s){return[i("el-tab-pane",{key:s,attrs:{label:e}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-ticket-wrapper",attrs:{"element-loading-spinner":"el-icon-kbus-loading"}},[i("div",{staticClass:"row no-gutters"},[i("div",{staticClass:"col-md-6",attrs:{id:"left"}},[t._l(t.uniqueTicketsByTicketCode,(function(e,n){return[s.toString()===t.tabActive?i("list-booked-ticket",{key:n,ref:"ListTicketsBooked",refInFor:!0,attrs:{ticket:e,"select-ticket":t.selectedTicket},on:{getTicketSelect:t.getTicketSelect}}):t._e()]}))],2),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTicket,expression:"loadingTicket"}],staticClass:"col-md-6",style:{display:t.screenSize<768?"none":"block"},attrs:{id:"right","element-loading-spinner":"el-icon-kbus-loading"}},[i("div",[t._l(t.uniqueTicketsByTicketCode,(function(e,n){return[s.toString()===t.tabActive&&t.selectedTicket===e.ticketCode?i("ticket-detail",{key:n,attrs:{"selected-ticket":t.selectedTicket}}):t._e()]}))],2),!t.loading&&!t.selectedTicket&&t.uniqueTicketsByTicketCode.length>0?i("div",{staticClass:"no-data text-center"},[i("img",{attrs:{src:"https://img.icons8.com/material-two-tone/96/000000/no-data-availible.png"}}),i("div",[t._v(t._s(t.$t("history.noData")))])]):t._e()])])])])]}))],2)],1),i("el-dialog",{attrs:{visible:t.dialogActive,width:"98%"},on:{"update:visible":function(e){t.dialogActive=e}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTicket,expression:"loadingTicket"}],staticClass:"col-md-6",attrs:{id:"right"}},[i("div",[t._l(t.uniqueTicketsByTicketCode,(function(e,s){return[t.selectedTicket===e.ticketCode?i("ticket-detail",{key:s,attrs:{"selected-ticket":t.selectedTicket}}):t._e()]}))],2)])])],1)},n=[],o=i("5530"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tickets-booked-wrapper",class:[t.ticket&&t.ticket.ticketCode===t.selectTicket?"active":"",t.ticketStatusClass()],on:{click:function(e){return t.handleSelectTicket(t.ticket.ticketCode)}}},[i("div",{staticClass:"row no-gutters align-items-center",staticStyle:{"border-bottom":"1px solid #ECEDF1"}},[i("div",{staticClass:"col"},[i("div",{staticClass:"d-flex align-items-end",staticStyle:{gap:"8px"}},[i("label",{staticClass:"time"},[t._v(t._s(t.formatStartTime))]),i("label",{staticClass:"date"},[t._v(t._s(t.formatStartDate))])]),i("div",[t.ticket.pointUp?i("label",{staticClass:"point-name"},[t._v(t._s(t.ticket.pointUp.name))]):t._e(),t.ticket.pointUp?i("label",{staticClass:"point-address"},[t._v(t._s(t.ticket.pointUp.address))]):t._e(),!t.ticket.pointUp&&t.getPointManual?i("label",{staticClass:"point-name"},[t._v(t._s(t.getPointManual[0].name?t.getPointManual[0].name:""))]):t._e(),!t.ticket.pointUp&&t.getPointManual?i("label",{staticClass:"point-address"},[t._v(t._s(t.getPointManual[0].address))]):t._e()])]),i("div",{staticClass:"col-auto"},[i("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.22861 2.31952C7.65464 1.89349 8.34536 1.89349 8.77139 2.31952L13.6805 7.22861C14.1065 7.65464 14.1065 8.34536 13.6805 8.77139L8.77139 13.6805C8.34536 14.1065 7.65464 14.1065 7.22861 13.6805C6.80258 13.2545 6.80258 12.5637 7.22861 12.1377L10.2754 9.09091H3.09091C2.48842 9.09091 2 8.60249 2 8C2 7.39751 2.48842 6.90909 3.09091 6.90909H10.2754L7.22861 3.8623C6.80258 3.43627 6.80258 2.74555 7.22861 2.31952Z",fill:"#2D225E"}})])]),i("div",{staticClass:"col text-right"},[i("label",{staticClass:"route-name",style:{"min-height":t.ticket.trip&&!t.ticket.trip.route?"20px":""}},[t._v(t._s(t.ticket.trip&&t.ticket.trip.route?t.ticket.trip.route.routeName:""))]),t.ticket.pointDown?i("label",{staticClass:"point-name"},[t._v(t._s(t.ticket.pointDown.name))]):t._e(),t.ticket.pointDown?i("label",{staticClass:"point-address"},[t._v(t._s(t.ticket.pointDown.address))]):t._e(),!t.ticket.pointDown&&t.getPointManual?i("label",{staticClass:"point-name",style:{"min-height":t.getPointManual[t.getPointManual.length-1].name?"":"16px"}},[t._v(t._s(t.getPointManual[t.getPointManual.length-1].name?t.getPointManual[t.getPointManual.length-1].name:""))]):t._e(),!t.ticket.pointDown&&t.getPointManual?i("label",{staticClass:"point-address"},[t._v(t._s(t.getPointManual[t.getPointManual.length-1].address))]):t._e()])]),i("div",{staticClass:"w-100 mt-2 d-flex"},[i("div",{staticClass:"col ticket-code"},[t._v(t._s(t.$t("history.ticketCode"))+": "+t._s(t.ticket.ticketCode)+" ("+t._s(t.$t("history.quantityTicket",{quantity:t.countQuantityTicket}))+")")]),i("div",{staticClass:"col text-right price-ticket"},[t._v(t._s(t.numeral(t.getTotalPriceTicket).format("0,0"))+"đ")])])])},r=[],c=(i("4de4"),i("d3b7"),i("ed08")),l=i("08f3"),u=i("2f62"),m={props:{ticket:{type:Object,default:null},selectTicket:{type:String,default:null}},data:function(){return{}},computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])(["listTicketsBooked","uniqueTicketsByTicketCode"])),{},{formatStartTime:function(){if(this.ticket.trip&&this.ticket.trip.runTime){var t=Object(c["f"])(this.ticket.trip.runTime);return t.hours+":"+t.minutes}return null},formatStartDate:function(){var t="";if(this.ticket.trip&&this.ticket.trip.runTime){var e=new Date(this.ticket.trip.runTime);t=this.$moment.utc(e).format("DD/MM/YYYY")}else t=null;return t},getTicketSelect:{get:function(){return this.selectTicket},set:function(t){this.$emit("getTicketSelect",t)}},ticketsByTicketCode:function(){var t=this,e=this.listTicketsBooked.filter((function(e,i){return e.ticketCode===t.ticket.ticketCode}));return e},getTotalPriceTicket:function(){var t=0;if(this.ticketsByTicketCode.length>0){var e=0;e=this.ticket.paidMoney?this.ticket.paidMoney:this.ticket.basePrice-this.ticket.discountMoney,t=e*this.ticketsByTicketCode.length}return parseInt(t)},countQuantityTicket:function(){var t=this,e=0;if(this.listTicketsBooked.length>0){var i=this.listTicketsBooked.filter((function(e,i){return e.ticketCode===t.ticket.ticketCode&&0!==e.status}));e=i.length}return e},getPointManual:function(){var t=null;return t=this.ticketsByTicketCode.length>0&&this.ticketsByTicketCode[0].trip&&this.ticketsByTicketCode[0].trip.pointManual?JSON.parse(this.ticketsByTicketCode[0].trip.pointManual):null,t}}),methods:{handleSelectTicket:function(t){this.getTicketSelect=t},ticketStatusClass:function(){return this.ticket.status===l["b"].CANCELED?"ticket-canceled":this.ticket.status===l["b"].NEW||this.ticket.status===l["b"].BOOKED?"ticket-unpaid":this.ticket.status===l["b"].BOUGHT?"ticket-paid":this.ticket.status===l["b"].COMPLETED?"ticket-completed":this.ticket.status===l["b"].ON_THE_TRIP?"ticket-departed":void 0}}},d=m,f=(i("6237"),i("46df"),i("2877")),h=Object(f["a"])(d,a,r,!1,null,"5b31c6c4",null),p=h.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingGetTickets,expression:"loadingGetTickets"}],staticClass:"tickets-wrapper",attrs:{"element-loading-spinner":"el-icon-kbus-loading"}},[t.tickets.length>0?s("div",{staticClass:"trip-info"},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col text-center"},[s("label",{staticClass:"time"},[t._v(t._s(t.formatStartTime))]),s("label",{staticClass:"date"},[t._v(t._s(t.formatStartDate))]),t.tickets[0].pointUp?s("label",{staticClass:"point-name"},[t._v(t._s(t.tickets[0].pointUp.name))]):t._e(),t.tickets[0].pointUp?s("label",{staticClass:"point-address"},[t._v(t._s(t.tickets[0].pointUp.address))]):t._e(),!t.tickets[0].pointUp&&t.getPointManual?s("label",{staticClass:"point-name"},[t._v(t._s(t.getPointManual[0].name?t.getPointManual[0].name:""))]):t._e(),!t.tickets[0].pointUp&&t.getPointManual?s("label",{staticClass:"point-address"},[t._v(t._s(t.getPointManual[0].address))]):t._e()]),s("div",{staticClass:"col-auto text-center",attrs:{id:"distance"}},[t.formatDistanceTime?s("div",{staticClass:"text"},[s("svg",{attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.15691 0.70942C3.31741 0.934126 3.26536 1.2464 3.04066 1.40691L1.29066 2.65691C1.06595 2.81741 0.753677 2.76536 0.593172 2.54066C0.432668 2.31595 0.484713 2.00368 0.70942 1.84317L2.45942 0.593172C2.68413 0.432668 2.9964 0.484713 3.15691 0.70942ZM8.84317 0.70942C9.00368 0.484713 9.31595 0.432668 9.54066 0.593172L11.2907 1.84317C11.5154 2.00368 11.5674 2.31595 11.4069 2.54066C11.2464 2.76536 10.9341 2.81741 10.7094 2.65691L8.95942 1.40691C8.73471 1.2464 8.68267 0.934126 8.84317 0.70942ZM0.916696 6.50005C0.916696 3.69258 3.19257 1.41671 6.00004 1.41671C8.80748 1.41671 11.0834 3.69258 11.0834 6.50005C11.0834 9.30749 8.80748 11.5834 6.00004 11.5834C3.19257 11.5834 0.916696 9.30749 0.916696 6.50005ZM6.00004 2.41671C3.74486 2.41671 1.9167 4.24487 1.9167 6.50005C1.9167 8.75521 3.74486 10.5834 6.00004 10.5834C8.2552 10.5834 10.0834 8.75521 10.0834 6.50005C10.0834 4.24487 8.2552 2.41671 6.00004 2.41671ZM5.93994 3.33843C6.21609 3.33846 6.43992 3.56234 6.43989 3.83848L6.43961 6.38354L8.23622 8.18015C8.43148 8.37541 8.43148 8.69199 8.23622 8.88725C8.04096 9.08252 7.72437 9.08252 7.52911 8.88725L5.58604 6.94418C5.49225 6.8504 5.43957 6.7232 5.43959 6.59057L5.43989 3.83837C5.43992 3.56223 5.6638 3.3384 5.93994 3.33843Z",fill:"white"}})]),s("span",{staticClass:"text"},[t._v(t._s(t.formatDistanceTime.hours)+" giờ "+t._s(t.formatDistanceTime.minutes)+"p")])]):t._e(),s("svg",{attrs:{width:"60",height:"20",viewBox:"0 0 60 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22.5002 3.33334C22.0581 3.33334 21.6342 3.50894 21.3217 3.8215C21.0091 4.13406 20.8335 4.55798 20.8335 5.00001V14.1667C20.8335 14.6269 21.2066 15 21.6668 15H22.6424C22.9856 15.971 23.9116 16.6667 25.0002 16.6667C26.0887 16.6667 27.0147 15.971 27.3579 15H32.6424C32.9856 15.971 33.9116 16.6667 35.0002 16.6667C36.0887 16.6667 37.0147 15.971 37.3579 15H38.3335C38.7937 15 39.1668 14.6269 39.1668 14.1667V10C39.1668 8.30635 38.6883 6.64673 37.7912 5.39086C36.8916 4.13145 35.6007 3.33334 34.1668 3.33334H22.5002ZM29.1668 5.00001H26.6668V7.50001H29.1668V5.00001ZM30.8335 7.50001V5.00001H32.6597L33.1955 7.50001H30.8335ZM22.5002 9.16668V13.3333H22.6424C22.9856 12.3623 23.9116 11.6667 25.0002 11.6667C26.0887 11.6667 27.0147 12.3623 27.3579 13.3333H32.6424C32.9856 12.3623 33.9116 11.6667 35.0002 11.6667C36.0887 11.6667 37.0147 12.3623 37.3579 13.3333H37.5002V10.8335H34.5835C34.1905 10.8335 33.851 10.559 33.7686 10.1748L33.5526 9.16668H22.5002ZM22.5002 5.00001H25.0002V7.50001H22.5002V5.00001ZM35.2571 9.16685H37.4526C37.3284 8.08758 36.9666 7.10379 36.435 6.35959C35.8283 5.51019 35.0831 5.07708 34.3663 5.00944L35.2571 9.16685Z",fill:"#2D225E"}}),s("rect",{attrs:{x:"12",y:"9",width:"4",height:"1",fill:"#2D225E"}}),s("rect",{attrs:{x:"6",y:"9",width:"4",height:"1",fill:"#2D225E"}}),s("rect",{attrs:{y:"9",width:"4",height:"1",fill:"#2D225E"}}),s("rect",{attrs:{x:"56",y:"9",width:"4",height:"1",fill:"#2D225E"}}),s("rect",{attrs:{x:"50",y:"9",width:"4",height:"1",fill:"#2D225E"}}),s("rect",{attrs:{x:"44",y:"9",width:"4",height:"1",fill:"#2D225E"}})])]),s("div",{staticClass:"col text-center"},[s("label",{staticClass:"time"},[t._v(t._s(t.formatEndTime))]),s("label",{staticClass:"date"},[t._v(t._s(t.formatEndDate))]),t.tickets[0].pointDown?s("label",{staticClass:"point-name"},[t._v(t._s(t.tickets[0].pointDown.name))]):t._e(),t.tickets[0].pointDown?s("label",{staticClass:"point-address"},[t._v(t._s(t.tickets[0].pointDown.address))]):t._e(),!t.tickets[0].pointDown&&t.getPointManual?s("label",{staticClass:"point-name"},[t._v(t._s(t.getPointManual[t.getPointManual.length-1].name?t.getPointManual[t.getPointManual.length-1].name:""))]):t._e(),!t.tickets[0].pointDown&&t.getPointManual?s("label",{staticClass:"point-address"},[t._v(t._s(t.getPointManual[t.getPointManual.length-1].address))]):t._e()])]),s("div",{staticClass:"w-100 ticket-note"},[t.tickets.length>0&&t.tickets[0].trip.note?s("span",[t._v(t._s(t.$t("history.noteTrip"))+": "+t._s(t.tickets[0].trip.note))]):t._e()])]):t._e(),t.tickets.length>0?s("div",{staticClass:"customer-info"},[t._l(t.passengersInfo,(function(e,i){return[s("div",{key:i,staticClass:"wrapper"},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col"},[s("label",{staticClass:"text-title"},[t._v("HK"+t._s(i+1))]),s("label",{staticClass:"text-title"},[t._v(t._s(t.$t("history.passengerInfo.fullName")))]),s("label",{staticClass:"text-title"},[t._v(t._s(t.$t("history.passengerInfo.phoneNumber")))]),s("label",{staticClass:"text-title"},[t._v(t._s(t.$t("history.passengerInfo.email")))]),s("label",{staticClass:"text-title"},[t._v(t._s(t.$t("history.passengerInfo.sex.label")))]),s("label",{staticClass:"text-title"},[t._v(t._s(t.$t("history.passengerInfo.price")))]),s("label",{staticClass:"text-title"},[t._v(t._s(t.$t("history.passengerInfo.promotion")))]),s("label",{staticClass:"text-title"},[t._v(t._s(t.$t("history.passengerInfo.discount")))]),s("label",{staticClass:"text-title",style:{color:t.getColorTicketStatus(e.ticketStatus)}},[t._v(t._s(t.getLabelTicketStatus(e.ticketStatus)))])]),s("div",{staticClass:"col text-right"},[s("label",{staticClass:"content",staticStyle:{height:"24px"}}),s("label",{staticClass:"content"},[t._v(t._s(e.fullName))]),s("label",{staticClass:"content"},[t._v(t._s(e.phoneNumber))]),s("label",{staticClass:"content"},[t._v(t._s(e.email))]),"MALE"===e.sex?s("label",{staticClass:"content"},[t._v(t._s(t.$t("history.passengerInfo.sex.male")))]):t._e(),"FEMALE"===e.sex?s("label",{staticClass:"content"},[t._v(t._s(t.$t("history.passengerInfo.sex.female")))]):t._e(),s("label",{staticClass:"content"},[t._v(t._s(t.numeral(e.totalPrice).format("0,0"))+"đ")]),s("label",{staticClass:"content"},[t._v(t._s(t.numeral(e.discountPrice).format("0,0"))+"đ")]),s("label",{staticClass:"content"},[t._v(t._s(t.numeral(e.promotionMoney).format("0,0"))+"đ")])])])])]}))],2):t._e(),s("div",{staticClass:"row no-gutters align-items-end mt-3"},[s("div",{staticClass:"col-md-6"},[t.tickets.length>0&&(t.hasTicketsBooked||t.hasTicketsPaid)?s("div",{staticClass:"share"},[s("span",{staticClass:"description"},[t._v(t._s(t.$t("history.share"))+":")]),s("div",{staticClass:"list-icon"},[s("a",{attrs:{href:"",title:t.$t("history.share")},on:{click:function(e){return e.preventDefault(),t.shareTrip()}}},[s("img",{attrs:{src:i("dce0"),alt:"share trip"}})])]),s("form-share-link",{attrs:{trip:t.tickets[0].trip},model:{value:t.dialogShareTrip,callback:function(e){t.dialogShareTrip=e},expression:"dialogShareTrip"}})],1):t._e()]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"pay-btn"},[t.hasTicketsBooked?s("label",{staticClass:"countdown pt-3 text-right"},[s("span",{staticClass:"label-time-remain"},[t._v(t._s(t.$t("history.payExpire"))+": ")]),s("time-countdown",{ref:"TimeCountdown",attrs:{expire:t.timeExpire},on:{"pay-expire":t.payExpire}})],1):t._e(),t.hasTicketsBooked&&!t.isPayExpire||t.hasTicketsPaid?s("el-button",{staticClass:"btn-edit-info",attrs:{type:"primary",loading:t.loadingEditInfo},on:{click:t.handleOpenFormEditInfo}},[t._v(" "+t._s(t.$t("history.btnEdit"))+" ")]):t._e(),s("form-edit-customer-info",{attrs:{infos:t.passengersInfo},model:{value:t.openFormEditInfo,callback:function(e){t.openFormEditInfo=e},expression:"openFormEditInfo"}}),s("div",{staticClass:"row no-gutters justify-content-end",staticStyle:{gap:"8px"}},[s("div",{staticClass:"col-auto"},[t.hasTicketsBooked&&!t.isPayExpire?s("el-button",{staticClass:"btn-pay",attrs:{loading:t.loadingPay,disabled:t.tickets&&t.tickets.length<=0||t.isPayExpire},on:{click:t.handlePayTicket}},[t._v(" "+t._s(t.$t("history.btnPay"))+" ")]):t._e()],1),s("div",{staticClass:"col-auto"},[t.hasTicketsBooked&&!t.isPayExpire||t.hasTicketsPaid?s("el-button",{staticClass:"btn-cancel-ticket",attrs:{loading:t.loadingCancelAllTicket},on:{click:t.cancelAllTicket}},[t._v(" "+t._s(t.$t("history.btnCancel"))+" ")]):t._e()],1)]),t.hasTicketsCompleted?s("el-button",{staticClass:"btn-rate-trip",on:{click:function(e){t.dialogRateTrip=!0}}},[t._v(t._s(t.$t("history.rateTrip")))]):t._e(),s("form-rate-trip",{attrs:{tickets:t.tickets},model:{value:t.dialogRateTrip,callback:function(e){t.dialogRateTrip=e},expression:"dialogRateTrip"}})],1)])])])},k=[],C=(i("159b"),i("d81d"),i("99af"),i("cca5")),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rate-trip-wrapper"},[i("el-dialog",{attrs:{visible:t.dialog,width:"50%"},on:{"update:visible":function(e){t.dialog=e}}},[i("div",{staticClass:"w-100"},[i("el-rate",{model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}}),i("div",{staticClass:"suggestions"},[t._l(t.suggestions,(function(e,s){return[i("el-button",{key:s,staticClass:"suggestion-item active",attrs:{round:""},on:{click:function(i){return t.handleSelectSuggestion(s,e)}}},[t._v(t._s(e))])]}))],2),i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"Nhập nội dung đánh giá..."},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),i("div",[i("el-button",{staticClass:"btn-send-rate",attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleRateTrip()}}},[t._v("Gửi đánh giá")])],1)],1)])],1)},b=[],T=(i("a15b"),{props:{value:{type:Boolean},tickets:{type:Array,default:null}},data:function(){return{rate:5,content:"",loading:!1,suggestions:["Tài xế thân thiện","Lái xe an toàn","Xe đầy đủ tiện nghi","Xe đến đúng giờ"],selectedSuggestion:[]}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{handleRateTrip:function(){var t=this;this.loading=!0,this.$store.dispatch("comment/createComments",{rating:this.rate,content:this.content,type:l["a"].ROUTE,typeId:this.tickets[0].trip.route.id}).then((function(e){t.loading=!1,t.$message.success("Đã đánh giá chuyến đi"),t.dialog=!1})).catch((function(e){t.loading=!1,console.log(e),t.$message.error(e.message?e.message:"Đã có lỗi xảy ra")}))},handleSelectSuggestion:function(t,e){this.selectedSuggestion.push(e),this.content=this.selectedSuggestion.join(". ")}}}),I=T,_=(i("31e6"),Object(f["a"])(I,v,b,!1,null,null,null)),y=_.exports,x=i("2e61"),A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.value,width:"50%"},on:{close:t.closeDialogEdit}},[i("div",{staticClass:"customer-info-wrapper"},[i("div",{style:{"border-bottom":t.totalPassengers>0?"1px solid #ECEDF1":""},attrs:{id:"list-label"}},[i("div",{staticClass:"nav"},[t._l(t.infos,(function(e,s){return[i("div",{key:s+1,staticClass:"nav-item"},[i("label",{staticClass:"pb-1",class:{"label-active":t.labelFormCustomerActive===s+1},on:{click:function(e){return t.handelFormCustomerActive(s+1)}}},[t._v(" HK"+t._s(s+1)+" ")])])]}))],2)]),i("div",{attrs:{id:"form-customer-info"}},[t._l(t.infos,(function(e,s){return[i("form-customer-info",{key:s+1,ref:"FormCustomerInfo",refInFor:!0,attrs:{"label-form-customer-active":t.labelFormCustomerActive,"passenger-info":e},model:{value:t.customerInfos,callback:function(e){t.customerInfos=e},expression:"customerInfos"}})]}))],2),i("div",{staticClass:"button-wrapper"},[i("el-button",{staticClass:"btn-save",attrs:{loading:t.loadingSaveInfo},on:{click:t.saveInfo}},[t._v(t._s(t.$t("history.btnSave")))]),i("el-button",{staticClass:"btn-cancel-edit",on:{click:t.closeDialogEdit}},[t._v(t._s(t.$t("history.btnClose")))])],1)])])],1)},E=[],w=i("1bba"),P={components:{FormCustomerInfo:w["a"]},props:{value:{type:Boolean},infos:{type:Array,default:null}},data:function(){return{totalPassengers:1,labelFormCustomerActive:1,listIndexTotalPassengers:[1],customerInfos:[],loadingSaveInfo:!1}},computed:Object(o["a"])({},Object(u["c"])(["validate"])),watch:{value:function(t){t&&this.$store.dispatch("trip/fillAllCustomer",!1)}},methods:{handelFormCustomerActive:function(t){this.labelFormCustomerActive=t},saveInfo:function(){var t=this;if(this.validate.length>0)this.$message.error(this.$t("message.history.checkCustomerInfo"));else{var e=[];this.$refs.FormCustomerInfo.forEach((function(t,i){if(0===t.validate.length&&t.customerInfo.fullname&&t.customerInfo.phoneNumber&&t.customerInfo.email&&t.customerInfo.sex){var s={id:t.customerInfo.ticketId,fullName:t.customerInfo.fullname,phoneNumber:t.customerInfo.phoneNumber,email:t.customerInfo.email,sex:t.sexLabel[t.customerInfo.sex]};e.push(s)}})),this.customerInfos=e,this.loadingSaveInfo=!0,setTimeout((function(){t.$store.dispatch("ticket/updateTicket",{tickets:t.customerInfos}).then((function(e){t.loadingSaveInfo=!1,t.$message.success(t.$t("message.history.updateInfoComplete")),t.$emit("input",!1)})).catch((function(e){t.loadingCreateTrip=!1,console.log(e),t.$message.error(e.message?e.message:t.$t("message.common.undefinedError"))}))}),200)}},closeDialogEdit:function(){this.$emit("input",!1)}}},D=P,$=(i("44c0"),Object(f["a"])(D,A,E,!1,null,"58c7b8ec",null)),M=$.exports,S={components:{TimeCountdown:C["a"],FormRateTrip:y,FormShareLink:x["a"],FormEditCustomerInfo:M},props:{selectedTicket:{type:String,default:null}},data:function(){return{tickets:[],loadingGetTickets:!1,loadingPay:!1,loadingCancelPerTicket:null,loadingCancelAllTicket:!1,loadingEditInfo:!1,isPayExpire:!1,dialogRateTrip:!1,dialogShareTrip:!1,openFormEditInfo:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])(["paymeResponse","userInfo","statusUpdateTicket","systemConfig"])),{},{formatStartTime:function(){var t="";return this.tickets.length>0&&(t=this.$moment.utc(this.tickets[0].trip.runTime).format("HH:mm")),t},formatStartDate:function(){var t="";if(this.tickets.length>0){var e=new Date(this.tickets[0].trip.runTime);t=this.$moment.utc(e).format("DD/MM/YYYY")}return t},formatDistanceTime:function(){var t="";if(this.tickets.length>0){var e=Object(c["c"])(this.tickets[0].trip.finishTime);t=e}return t},formatEndTime:function(){var t="";if(this.tickets.length>0){var e=new Date(this.tickets[0].trip.runTime),i=e.getTime(),s=new Date(i+this.tickets[0].trip.finishTime),n=Object(c["f"])(s);t=n.hours+":"+n.minutes}return t},formatEndDate:function(){var t="";if(this.tickets.length>0){var e=new Date(this.tickets[0].trip.runTime),i=e.getTime(),s=new Date(i+this.tickets[0].trip.finishTime);t=this.$moment.utc(s).format("DD/MM/YYYY")}return t},passengersInfo:function(){var t=[];return this.tickets.length>0&&this.tickets.forEach((function(e,i){var s=0;s=e.isOwned?0:e.refundMoney?e.refundMoney:0,t.push({ticketStatus:e.status,ticketId:e.id,fullName:e.fullName,phoneNumber:e.phoneNumber,email:e.email,sex:e.sex,totalPrice:e.paidMoney&&e.paidMoney>0?e.paidMoney:e.basePrice,discountPrice:s,promotionMoney:e.discountMoney})})),t},timeExpire:function(){var t="";return this.tickets.length>0&&(t=new Date(this.tickets[0].createdAt).getTime()+this.systemConfigData.ticketHolderTime),t},hasTicketsBooked:function(){var t=this.passengersInfo.filter((function(t,e){return 1===t.ticketStatus||2===t.ticketStatus}));return t.length>0},hasTicketsPaid:function(){var t=this.passengersInfo.filter((function(t,e){return 3===t.ticketStatus}));return t.length>0},hasTicketsCompleted:function(){var t=this.passengersInfo.filter((function(t,e){return 5===t.ticketStatus}));return t.length>0},getPointManual:function(){var t=null;return this.tickets.length>0&&(t=JSON.parse(this.tickets[0].trip.pointManual)),t},systemConfigData:function(){var t=null;return this.systemConfig&&(t=JSON.parse(this.systemConfig.data)),t}}),watch:{statusUpdateTicket:function(t){t&&this.getTicketsByTicketCode()}},mounted:function(){this.getTicketsByTicketCode()},methods:{getTicketsByTicketCode:function(){var t=this;this.loadingGetTickets=!0,this.$store.dispatch("ticket/getTicketsByTicketCode",{ticketCode:this.selectedTicket}).then((function(e){t.tickets=e,t.loadingGetTickets=!1,t.$store.dispatch("ticket/changeStatusUpdateTicket",!1)})).catch((function(e){t.loadingGetTickets=!1,console.log(e),t.$message.error(t.$t("message.common.undefinedError"))}))},handleOpenFormEditInfo:function(){this.openFormEditInfo=!0},handlePayTicket:function(){var t=this,e=this.tickets.filter((function(t){return 0!==t.status})),i=e.map((function(t){return t.id}));this.loadingPay=!0,this.$store.dispatch("payme/getPaymeResponse",{ticketIds:i}).then((function(e){window.location.href=t.paymeResponse.data.url,t.loadingPay=!1})).catch((function(e){t.$message.error(t.$t("message.common.undefinedError")),console.log(e),t.loadingPay=!1}))},payExpire:function(t){this.isPayExpire=!0},getLabelTicketStatus:function(t){var e="";switch(!0){case t===l["b"].CANCELED:e=this.$t("history.ticketStatus.canceled");break;case t===l["b"].NEW&&!this.isPayExpire:e=this.$t("history.ticketStatus.booked");break;case t===l["b"].BOOKED&&!this.isPayExpire:e=this.$t("history.ticketStatus.booked");break;case(t===l["b"].NEW||t===l["b"].BOOKED)&&this.isPayExpire:e=this.$t("history.ticketStatus.timeout");break;case t===l["b"].BOUGHT:e=this.$t("history.ticketStatus.bought");break;case t===l["b"].ON_THE_TRIP:e=this.$t("history.ticketStatus.onTrip");break;case t===l["b"].COMPLETED:e=this.$t("history.ticketStatus.completed");break}return e},getColorTicketStatus:function(t){var e="";switch(!0){case t===l["b"].CANCELED:e="red";break;case t===l["b"].NEW&&!this.isPayExpire:e="#F39B13";break;case t===l["b"].BOOKED&&!this.isPayExpire:e="#F39B13";break;case(t===l["b"].NEW||t===l["b"].BOOKED)&&this.isPayExpire:e="red";break;case t===l["b"].BOUGHT:e="#ED196B";break;case t===l["b"].ON_THE_TRIP:e="#0091FE";break;case t===l["b"].COMPLETED:e="#50C694";break}return e},cancelPerTicket:function(t){var e=this,i="",s=new Date(this.$moment(this.tickets[0].trip.runTime)),n=new Date,o=s.getTime()-252e5,a=n.getTime(),r=o-432e5;if(a>r?i="".concat(this.$t("history.confirmCancel.confirm"),"\n\n").concat(this.$t("history.confirmCancel.after12")):a<r&&(i="".concat(this.$t("history.confirmCancel.confirm"),"\n\n").concat(this.$t("history.confirmCancel.before12"))),confirm(i)){var c=[];c.push(t),this.loadingCancelPerTicket=t,this.$store.dispatch("ticket/cancelTicket",{ticketIds:c}).then((function(t){e.loadingCancelPerTicket=null,e.getTicketsByTicketCode()})).catch((function(t){console.log(t),e.loadingCancelPerTicket=null,e.$message.error(e.$t("message.common.undefinedError"))}))}else r<0&&alert(i)},cancelAllTicket:function(){var t=this,e=this.tickets.filter((function(t,e){return 0!==t.status})),i=e.map((function(t,e){return t.id})),s="",n=new Date(this.tickets[0].trip.runTime),o=new Date,a=n.getTime()-252e5,r=o.getTime(),c=a-432e5;r>c?s="".concat(this.$t("history.confirmCancel.confirm"),"\n\n").concat(this.$t("history.confirmCancel.after12")):r<c&&(s="".concat(this.$t("history.confirmCancel.confirm"),"\n\n").concat(this.$t("history.confirmCancel.before12"))),confirm(s)&&(this.loadingCancelPerTicket=!0,this.$store.dispatch("ticket/cancelTicket",{ticketIds:i}).then((function(e){t.loadingCancelPerTicket=!1,t.getTicketsByTicketCode()})).catch((function(e){console.log(e),t.loadingCancelPerTicket=!1,t.$message.error(t.$t("message.common.undefinedError"))})))},shareTrip:function(){this.dialogShareTrip=!0}}},O=S,N=(i("3579"),Object(f["a"])(O,g,k,!1,null,"230aa1b2",null)),B=N.exports,F={components:{ListBookedTicket:p,TicketDetail:B},data:function(){return{loading:!1,selectedTicket:"",loadingTicket:!1,listTicketsByTicketCode:[],dialogActive:!1,screenSize:window.innerWidth||0,listTabs:this.$t("history.tabs"),tabActive:"0"}},computed:Object(o["a"])({},Object(u["c"])(["listTicketsBooked","uniqueTicketsByTicketCode"])),watch:{screenSize:function(t){t>767?this.dialogActive=!1:this.selectedTicket&&(this.dialogActive=!0)},selectedTicket:function(t){this.screenSize<768&&t&&(this.dialogActive=!0)},dialogActive:function(t){t||(this.selectedTicket="")},tabActive:function(t){this.getTickets()}},created:function(){window.addEventListener("resize",this.handleDialogWhenScreenResize)},destroyed:function(){window.removeEventListener("resize",this.handleDialogWhenScreenResize)},mounted:function(){this.getTickets()},methods:{getTickets:function(){var t=this,e=[];switch(this.tabActive){case"0":e=[l["b"].NEW,l["b"].BOOKED];break;case"1":e=[l["b"].BOUGHT,l["b"].ON_THE_TRIP];break;case"2":e=[l["b"].COMPLETED];break;case"3":e=[l["b"].CANCELED];break;default:e=[l["b"].NEW,l["b"].BOOKED];break}this.loading=!0,this.$store.dispatch("ticket/ticketsBooked",{ticketCode:null,ticketStatuses:e}).then((function(e){t.loading=!1})).catch((function(e){t.loading=!1,console.log(e),t.$message.error(e.message?e.message:t.$t("message.common.undefinedError"))}))},getTicketSelect:function(t){this.selectedTicket=t},handleDialogWhenScreenResize:function(t){this.screenSize=t.target.screen.width},handleClickTab:function(t,e){}}},L=F,H=(i("50ed"),Object(f["a"])(L,s,n,!1,null,"466b0613",null));e["default"]=H.exports},"44c0":function(t,e,i){"use strict";i("2447")},"46df":function(t,e,i){"use strict";i("c688")},"50ed":function(t,e,i){"use strict";i("7dfb")},"5cb5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAoVJREFUaIHtl0F22jAQhv+R6ZI8H0FxtzHlBk1PEGcfqDlB0xMAJ2h7Avyg+6YnaHOC+D3Ylrg38L6xJotCsSVjG0hho29nacb8w0gzY8BisVgsFovFYjkV1MRIysA9E+2QgbcE6jIg63zmy2nh3b7X51oxjJiJExC+z3/NoibaagPw5U0AISYA3CYvXLNPABoJiMd1gYiqzY73/hOE+IYdxb8QEkyTjtcfVhm1tm10vP6QwbclWymAlJmTXdQw889qC3KJ0DX8gJHv9dz5cvax1Kts0Ze9EIIm2nLCSg1aaMVxEqUNde/M6reH0O+ZUtfz5Oudbl8egNd/LL6A7hxFg/8pPE9Xhm4msglAQW45dZQ41zUYd8CXvRDF6JNjigeAOIlSRzkDAPlj6v4RWajbmpfYwVXhmXh8TPFr4iRKWalBfk0wXep2xiVmJpk/V3VlbI/yWEAvt3laaMUZVIp1FSS80W2MDBA2lYAZ8SHiDmWV+Xz2jQZa2QeITlL/C3AxAIOyAAoXpyvDkwZRdyLMRkYcg2mdKvcJT10AW5tQ1Rk+lFVF3EgDfus2RgYU477gJMTkFFmQMnBXDW2DYKORGQG8Uk4E7eJkIjtqEFIGblu0J9D6UVlFNAKIkyiFVn8BCjKhHvzXPaORvCRSBu6FvLlsi7MHrQsDxOMyn63n98LrfybgQ6kTI2ZwZXWYP87e5Z/9896PKnsikvy33huZZmC8WE5HZX5bp9HFcnp74fVTAoxxlgndht9CeYVGF9VEblv/sk08UNMHFsvpCIr1meRYpFDqerGclo30/2j8N/qyF7LAFZhk2dyus+cXWcLgWAD3QjnRKWYwi8VisVgsFoulOc826u1knO/3ywAAAABJRU5ErkJggg=="},"5e27":function(t,e,i){},6237:function(t,e,i){"use strict";i("bb26")},6592:function(t,e,i){},"6cd6":function(t,e,i){},"72a8":function(t,e,i){},"79ec":function(t,e,i){},"7dfb":function(t,e,i){},a6fb:function(t,e,i){},ae0d:function(t,e,i){"use strict";i("6592")},af48:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA1FJREFUaIHtmb9WGkEUxr87i0kaDUljO5LGQglvILwBdhYGyROITyA+gfAEWSFFOtOmEt+ACDknTcimtXHTRpmbApIos7PM/gHNkd85NLMzO/fOXO6d+RZYsOBxQ2m9aEPuFoWgAgNbBCowkMXoBwA+MTwm9hj0GUp1+t77ThrzJnJAynJ2RazsM1DDP2Nt8QDuXKvro6/eBy+uDbEcGBn+/JDBtbgT34XduI44UQfkc5X9J/T0I4Bi1LFmqOCQU159mf95eXXRjTIykgP53N4xA3UAzyLZZ0cWoPLqi3z28urik+0gqxCSspxdpuVTEKW46iEwdxx2true60/rKmzeN1fjAYCoOKThqU3XqSGUz+0dg7CT3KqIEEmbcAoNoU35pgpB7xKY4TPQvFG/XFOG2cxVONxAPrgYtBvm5wbW5Y5cEk/OAEhrc2/DOHFY1KbF8TQHAPiOEmum92RMo5bE0iFiGs9As/+9lVKNQHYohocADoIeBv6J1+WOBKgac0Ivo0Q95lgDVCvIamClD3RgvPox5+Ijm/QXlRuhAnfUkEbjp8zh0IlUSW0hYN/QfpcNuVskIc7iTtQbtAITQ/5VZY8ZDUQ/9P2FlSpNnmL1HRBiJgWLGXUkMB4AWFBhsk1zgIhfJ5kkhHjp+BaC9dDWHGCmxBPNDIK2uPoOpLBSM0QLwaAslChOZ4xmm7ES22LKOrb9LI4SoQTtQOpFKEU02/4rB5ihnWh1B4hnUknTgIAfk22aA4pxPh9zosMEbXH1NKoe7g5AKU0MM2WGK8RMp7PKNgC83qC1NtkYeBploJlwshlAgVJkoAMZJYx30PvCUXQU1B7oQNdz/Ye1C+R2PTdQFDDqQuNr4UOoCZ5p9YEQB7qe6xPYOHBujK6oRtE3VJm7GLQb9xlKDDR739puWJ+p0mJ/0KqBOZWPEVFgRrc/mC7NWGmjDjvb83SCmTsZFiWbvlbH6bFMUtrIVRomdSAtRqJY21oUs9qBP/QHrRoUvwX0U2EK+Ap8YBM2t4nkAAD0vLbrKFEC4yTqWBMMNB0l1r6EiLgmEn3kK8iqHJKqg7CF8V06wlnIZ6CZUaKRRMlLdKUc5+cqMBLEpmhKHoO7AjhXirtpfWZdsOCx8xtvtDS7COwvQAAAAABJRU5ErkJggg=="},bb26:function(t,e,i){},c539:function(t,e,i){"use strict";i("72a8")},c688:function(t,e,i){},cca5:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"content"},[t._v(t._s(t.data))])},n=[],o=(i("a9e3"),{props:{expire:{type:Number,default:null}},data:function(){return{data:"",expireDefault:9e5,interval:""}},computed:{},watch:{expire:function(t){t&&this.startTimer(this.expire)}},mounted:function(){this.expire&&this.startTimer(this.expire)},methods:{startTimer:function(t){var e,i,s=this;function n(){var n=new Date,o=n.getTime(),a=(t-o)/1e3;e=0|Math.floor(a/60),i=0|Math.floor(a%60),e=e<10?"0"+e:e,i=i<10?"0"+i:i,s.data=e+":"+i,s.$emit("remaining",s.data),a<=0&&(s.data="00:00",s.$emit("pay-expire",s.data),clearInterval(this.interval))}n(),this.interval=setInterval(n,1e3)}}}),a=o,r=(i("d1d5"),i("2877")),c=Object(r["a"])(a,s,n,!1,null,"47e89c95",null);e["a"]=c.exports},d000:function(t,e,i){"use strict";i("6cd6")},d1d5:function(t,e,i){"use strict";i("79ec")},d774:function(t,e,i){},dce0:function(t,e,i){t.exports=i.p+"static/img/icon-share-2.9a07cb44.svg"}}]);